(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var ir={exports:{}},Bt={};var Vi;function ha(){if(Vi)return Bt;Vi=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var I in o)I!=="key"&&(c[I]=o[I])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:u,ref:o!==void 0?o:null,props:c}}return Bt.Fragment=e,Bt.jsx=n,Bt.jsxs=n,Bt}var Bi;function ua(){return Bi||(Bi=1,ir.exports=ha()),ir.exports}ua();var sr={exports:{}},O={};var Hi;function la(){if(Hi)return O;Hi=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),b=Symbol.iterator;function W(m){return m===null||typeof m!="object"?null:(m=b&&m[b]||m["@@iterator"],typeof m=="function"?m:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,H={};function J(m,S,N){this.props=m,this.context=S,this.refs=H,this.updater=N||B}J.prototype.isReactComponent={},J.prototype.setState=function(m,S){if(typeof m!="object"&&typeof m!="function"&&m!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,m,S,"setState")},J.prototype.forceUpdate=function(m){this.updater.enqueueForceUpdate(this,m,"forceUpdate")};function ee(){}ee.prototype=J.prototype;function te(m,S,N){this.props=m,this.context=S,this.refs=H,this.updater=N||B}var he=te.prototype=new ee;he.constructor=te,G(he,J.prototype),he.isPureReactComponent=!0;var le=Array.isArray;function ne(){}var p={H:null,A:null,T:null,S:null},l=Object.prototype.hasOwnProperty;function d(m,S,N){var P=N.ref;return{$$typeof:r,type:m,key:S,ref:P!==void 0?P:null,props:N}}function _(m,S){return d(m.type,S,m.props)}function g(m){return typeof m=="object"&&m!==null&&m.$$typeof===r}function v(m){var S={"=":"=0",":":"=2"};return"$"+m.replace(/[=:]/g,function(N){return S[N]})}var f=/\/+/g;function X(m,S){return typeof m=="object"&&m!==null&&m.key!=null?v(""+m.key):S.toString(36)}function Te(m){switch(m.status){case"fulfilled":return m.value;case"rejected":throw m.reason;default:switch(typeof m.status=="string"?m.then(ne,ne):(m.status="pending",m.then(function(S){m.status==="pending"&&(m.status="fulfilled",m.value=S)},function(S){m.status==="pending"&&(m.status="rejected",m.reason=S)})),m.status){case"fulfilled":return m.value;case"rejected":throw m.reason}}throw m}function Ne(m,S,N,P,L){var j=typeof m;(j==="undefined"||j==="boolean")&&(m=null);var V=!1;if(m===null)V=!0;else switch(j){case"bigint":case"string":case"number":V=!0;break;case"object":switch(m.$$typeof){case r:case e:V=!0;break;case R:return V=m._init,Ne(V(m._payload),S,N,P,L)}}if(V)return L=L(m),V=P===""?"."+X(m,0):P,le(L)?(N="",V!=null&&(N=V.replace(f,"$&/")+"/"),Ne(L,S,N,"",function(Mn){return Mn})):L!=null&&(g(L)&&(L=_(L,N+(L.key==null||m&&m.key===L.key?"":(""+L.key).replace(f,"$&/")+"/")+V)),S.push(L)),1;V=0;var ce=P===""?".":P+":";if(le(m))for(var Q=0;Q<m.length;Q++)P=m[Q],j=ce+X(P,Q),V+=Ne(P,S,N,j,L);else if(Q=W(m),typeof Q=="function")for(m=Q.call(m),Q=0;!(P=m.next()).done;)P=P.value,j=ce+X(P,Q++),V+=Ne(P,S,N,j,L);else if(j==="object"){if(typeof m.then=="function")return Ne(Te(m),S,N,P,L);throw S=String(m),Error("Objects are not valid as a React child (found: "+(S==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":S)+"). If you meant to render a collection of children, use an array instead.")}return V}function ht(m,S,N){if(m==null)return m;var P=[],L=0;return Ne(m,P,"","",function(j){return S.call(N,j,L++)}),P}function ut(m){if(m._status===-1){var S=m._result;S=S(),S.then(function(N){(m._status===0||m._status===-1)&&(m._status=1,m._result=N)},function(N){(m._status===0||m._status===-1)&&(m._status=2,m._result=N)}),m._status===-1&&(m._status=0,m._result=S)}if(m._status===1)return m._result.default;throw m._result}var qe=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var S=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(S))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Ln={map:ht,forEach:function(m,S,N){ht(m,function(){S.apply(this,arguments)},N)},count:function(m){var S=0;return ht(m,function(){S++}),S},toArray:function(m){return ht(m,function(S){return S})||[]},only:function(m){if(!g(m))throw Error("React.Children.only expected to receive a single React element child.");return m}};return O.Activity=C,O.Children=Ln,O.Component=J,O.Fragment=n,O.Profiler=o,O.PureComponent=te,O.StrictMode=i,O.Suspense=E,O.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,O.__COMPILER_RUNTIME={__proto__:null,c:function(m){return p.H.useMemoCache(m)}},O.cache=function(m){return function(){return m.apply(null,arguments)}},O.cacheSignal=function(){return null},O.cloneElement=function(m,S,N){if(m==null)throw Error("The argument must be a React element, but you passed "+m+".");var P=G({},m.props),L=m.key;if(S!=null)for(j in S.key!==void 0&&(L=""+S.key),S)!l.call(S,j)||j==="key"||j==="__self"||j==="__source"||j==="ref"&&S.ref===void 0||(P[j]=S[j]);var j=arguments.length-2;if(j===1)P.children=N;else if(1<j){for(var V=Array(j),ce=0;ce<j;ce++)V[ce]=arguments[ce+2];P.children=V}return d(m.type,L,P)},O.createContext=function(m){return m={$$typeof:u,_currentValue:m,_currentValue2:m,_threadCount:0,Provider:null,Consumer:null},m.Provider=m,m.Consumer={$$typeof:c,_context:m},m},O.createElement=function(m,S,N){var P,L={},j=null;if(S!=null)for(P in S.key!==void 0&&(j=""+S.key),S)l.call(S,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(L[P]=S[P]);var V=arguments.length-2;if(V===1)L.children=N;else if(1<V){for(var ce=Array(V),Q=0;Q<V;Q++)ce[Q]=arguments[Q+2];L.children=ce}if(m&&m.defaultProps)for(P in V=m.defaultProps,V)L[P]===void 0&&(L[P]=V[P]);return d(m,j,L)},O.createRef=function(){return{current:null}},O.forwardRef=function(m){return{$$typeof:I,render:m}},O.isValidElement=g,O.lazy=function(m){return{$$typeof:R,_payload:{_status:-1,_result:m},_init:ut}},O.memo=function(m,S){return{$$typeof:T,type:m,compare:S===void 0?null:S}},O.startTransition=function(m){var S=p.T,N={};p.T=N;try{var P=m(),L=p.S;L!==null&&L(N,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(ne,qe)}catch(j){qe(j)}finally{S!==null&&N.types!==null&&(S.types=N.types),p.T=S}},O.unstable_useCacheRefresh=function(){return p.H.useCacheRefresh()},O.use=function(m){return p.H.use(m)},O.useActionState=function(m,S,N){return p.H.useActionState(m,S,N)},O.useCallback=function(m,S){return p.H.useCallback(m,S)},O.useContext=function(m){return p.H.useContext(m)},O.useDebugValue=function(){},O.useDeferredValue=function(m,S){return p.H.useDeferredValue(m,S)},O.useEffect=function(m,S){return p.H.useEffect(m,S)},O.useEffectEvent=function(m){return p.H.useEffectEvent(m)},O.useId=function(){return p.H.useId()},O.useImperativeHandle=function(m,S,N){return p.H.useImperativeHandle(m,S,N)},O.useInsertionEffect=function(m,S){return p.H.useInsertionEffect(m,S)},O.useLayoutEffect=function(m,S){return p.H.useLayoutEffect(m,S)},O.useMemo=function(m,S){return p.H.useMemo(m,S)},O.useOptimistic=function(m,S){return p.H.useOptimistic(m,S)},O.useReducer=function(m,S,N){return p.H.useReducer(m,S,N)},O.useRef=function(m){return p.H.useRef(m)},O.useState=function(m){return p.H.useState(m)},O.useSyncExternalStore=function(m,S,N){return p.H.useSyncExternalStore(m,S,N)},O.useTransition=function(){return p.H.useTransition()},O.version="19.2.4",O}var $i;function fa(){return $i||($i=1,sr.exports=la()),sr.exports}fa();const da=()=>{};var Wi={};const Ls=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},pa=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],u=r[n++],I=r[n++],E=((o&7)<<18|(c&63)<<12|(u&63)<<6|I&63)-65536;e[i++]=String.fromCharCode(55296+(E>>10)),e[i++]=String.fromCharCode(56320+(E&1023))}else{const c=r[n++],u=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},Ms={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const c=r[o],u=o+1<r.length,I=u?r[o+1]:0,E=o+2<r.length,T=E?r[o+2]:0,R=c>>2,C=(c&3)<<4|I>>4;let b=(I&15)<<2|T>>6,W=T&63;E||(W=64,u||(b=64)),i.push(n[R],n[C],n[b],n[W])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ls(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):pa(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],I=o<r.length?n[r.charAt(o)]:0;++o;const T=o<r.length?n[r.charAt(o)]:64;++o;const C=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||I==null||T==null||C==null)throw new ga;const b=c<<2|I>>4;if(i.push(b),T!==64){const W=I<<4&240|T>>2;if(i.push(W),C!==64){const B=T<<6&192|C;i.push(B)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ga extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ma=function(r){const e=Ls(r);return Ms.encodeByteArray(e,!0)},Sn=function(r){return ma(r).replace(/\./g,"")},Us=function(r){try{return Ms.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _a(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ya=()=>_a().__FIREBASE_DEFAULTS__,va=()=>{if(typeof process>"u"||typeof Wi>"u")return;const r=Wi.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},wa=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Us(r[1]);return e&&JSON.parse(e)},br=()=>{try{return da()||ya()||va()||wa()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},xs=r=>br()?.emulatorHosts?.[r],Ia=r=>{const e=xs(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},js=()=>br()?.config,Fs=r=>br()?.[`_${r}`];class Ea{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Xt(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vs(r){return(await fetch(r,{credentials:"include"})).ok}function Ta(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Sn(JSON.stringify(n)),Sn(JSON.stringify(u)),""].join(".")}const Ht={};function Sa(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ht))Ht[e]?r.emulator.push(e):r.prod.push(e);return r}function Aa(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let zi=!1;function Bs(r,e){if(typeof window>"u"||typeof document>"u"||!Xt(window.location.host)||Ht[r]===e||Ht[r]||zi)return;Ht[r]=e;function n(b){return`__firebase__banner__${b}`}const i="__firebase__banner",c=Sa().prod.length>0;function u(){const b=document.getElementById(i);b&&b.remove()}function I(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function E(b,W){b.setAttribute("width","24"),b.setAttribute("id",W),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function T(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{zi=!0,u()},b}function R(b,W){b.setAttribute("id",W),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function C(){const b=Aa(i),W=n("text"),B=document.getElementById(W)||document.createElement("span"),G=n("learnmore"),H=document.getElementById(G)||document.createElement("a"),J=n("preprendIcon"),ee=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const te=b.element;I(te),R(H,G);const he=T();E(ee,J),te.append(ee,B,H,he),document.body.appendChild(te)}c?(B.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",W)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}function ae(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ba(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ae())}function Ca(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ra(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Pa(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ka(){const r=ae();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Na(){try{return typeof indexedDB=="object"}catch{return!1}}function Oa(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Da="FirebaseError";class ke extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Da,Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?La(c,i):"Error",I=`${this.serviceName}: ${u} (${o}).`;return new ke(o,I,i)}}function La(r,e){return r.replace(Ma,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Ma=/\{\$([^}]+)}/g;function Ua(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function it(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const c=r[o],u=e[o];if(Gi(c)&&Gi(u)){if(!it(c,u))return!1}else if(c!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Gi(r){return r!==null&&typeof r=="object"}function Qt(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function xa(r,e){const n=new ja(r,e);return n.subscribe.bind(n)}class ja{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Fa(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=or),o.error===void 0&&(o.error=or),o.complete===void 0&&(o.complete=or);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fa(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function or(){}function ct(r){return r&&r._delegate?r._delegate:r}class st{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ze="[DEFAULT]";class Va{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ea;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ha(e))try{this.getOrInitializeService({instanceIdentifier:Ze})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Ze){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ze){return this.instances.has(e)}getOptions(e=Ze){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,u]of this.instancesDeferred.entries()){const I=this.normalizeInstanceIdentifier(c);i===I&&u.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ba(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ze){return this.component?this.component.multipleInstances?e:Ze:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ba(r){return r===Ze?void 0:r}function Ha(r){return r.instantiationMode==="EAGER"}class $a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Va(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var F;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(F||(F={}));const Wa={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},za=F.INFO,Ga={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},qa=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=Ga[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cr{constructor(e){this.name=e,this._logLevel=za,this._logHandler=qa,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in F))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wa[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...e),this._logHandler(this,F.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...e),this._logHandler(this,F.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,F.INFO,...e),this._logHandler(this,F.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,F.WARN,...e),this._logHandler(this,F.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...e),this._logHandler(this,F.ERROR,...e)}}const Ja=(r,e)=>e.some(n=>r instanceof n);let qi,Ji;function Ka(){return qi||(qi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ya(){return Ji||(Ji=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hs=new WeakMap,mr=new WeakMap,$s=new WeakMap,ar=new WeakMap,Rr=new WeakMap;function Xa(r){const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",u)},c=()=>{n($e(r.result)),o()},u=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Hs.set(n,r)}).catch(()=>{}),Rr.set(e,r),e}function Za(r){if(mr.has(r))return;const e=new Promise((n,i)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",u),r.removeEventListener("abort",u)},c=()=>{n(),o()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",u),r.addEventListener("abort",u)});mr.set(r,e)}let _r={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return mr.get(r);if(e==="objectStoreNames")return r.objectStoreNames||$s.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $e(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Qa(r){_r=r(_r)}function ec(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(cr(this),e,...n);return $s.set(i,e.sort?e.sort():[e]),$e(i)}:Ya().includes(r)?function(...e){return r.apply(cr(this),e),$e(Hs.get(this))}:function(...e){return $e(r.apply(cr(this),e))}}function tc(r){return typeof r=="function"?ec(r):(r instanceof IDBTransaction&&Za(r),Ja(r,Ka())?new Proxy(r,_r):r)}function $e(r){if(r instanceof IDBRequest)return Xa(r);if(ar.has(r))return ar.get(r);const e=tc(r);return e!==r&&(ar.set(r,e),Rr.set(e,r)),e}const cr=r=>Rr.get(r);function nc(r,e,{blocked:n,upgrade:i,blocking:o,terminated:c}={}){const u=indexedDB.open(r,e),I=$e(u);return i&&u.addEventListener("upgradeneeded",E=>{i($e(u.result),E.oldVersion,E.newVersion,$e(u.transaction),E)}),n&&u.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),I.then(E=>{c&&E.addEventListener("close",()=>c()),o&&E.addEventListener("versionchange",T=>o(T.oldVersion,T.newVersion,T))}).catch(()=>{}),I}const rc=["get","getKey","getAll","getAllKeys","count"],ic=["put","add","delete","clear"],hr=new Map;function Ki(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(hr.get(e))return hr.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=ic.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||rc.includes(n)))return;const c=async function(u,...I){const E=this.transaction(u,o?"readwrite":"readonly");let T=E.store;return i&&(T=T.index(I.shift())),(await Promise.all([T[n](...I),o&&E.done]))[0]};return hr.set(e,c),c}Qa(r=>({...r,get:(e,n,i)=>Ki(e,n)||r.get(e,n,i),has:(e,n)=>!!Ki(e,n)||r.has(e,n)}));class sc{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oc(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function oc(r){return r.getComponent()?.type==="VERSION"}const yr="@firebase/app",Yi="0.14.8";const Ce=new Cr("@firebase/app"),ac="@firebase/app-compat",cc="@firebase/analytics-compat",hc="@firebase/analytics",uc="@firebase/app-check-compat",lc="@firebase/app-check",fc="@firebase/auth",dc="@firebase/auth-compat",pc="@firebase/database",gc="@firebase/data-connect",mc="@firebase/database-compat",_c="@firebase/functions",yc="@firebase/functions-compat",vc="@firebase/installations",wc="@firebase/installations-compat",Ic="@firebase/messaging",Ec="@firebase/messaging-compat",Tc="@firebase/performance",Sc="@firebase/performance-compat",Ac="@firebase/remote-config",bc="@firebase/remote-config-compat",Cc="@firebase/storage",Rc="@firebase/storage-compat",Pc="@firebase/firestore",kc="@firebase/ai",Nc="@firebase/firestore-compat",Oc="firebase",Dc="12.9.0";const vr="[DEFAULT]",Lc={[yr]:"fire-core",[ac]:"fire-core-compat",[hc]:"fire-analytics",[cc]:"fire-analytics-compat",[lc]:"fire-app-check",[uc]:"fire-app-check-compat",[fc]:"fire-auth",[dc]:"fire-auth-compat",[pc]:"fire-rtdb",[gc]:"fire-data-connect",[mc]:"fire-rtdb-compat",[_c]:"fire-fn",[yc]:"fire-fn-compat",[vc]:"fire-iid",[wc]:"fire-iid-compat",[Ic]:"fire-fcm",[Ec]:"fire-fcm-compat",[Tc]:"fire-perf",[Sc]:"fire-perf-compat",[Ac]:"fire-rc",[bc]:"fire-rc-compat",[Cc]:"fire-gcs",[Rc]:"fire-gcs-compat",[Pc]:"fire-fst",[Nc]:"fire-fst-compat",[kc]:"fire-vertex","fire-js":"fire-js",[Oc]:"fire-js-all"};const qt=new Map,Mc=new Map,wr=new Map;function Xi(r,e){try{r.container.addComponent(e)}catch(n){Ce.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function wt(r){const e=r.name;if(wr.has(e))return Ce.debug(`There were multiple attempts to register component ${e}.`),!1;wr.set(e,r);for(const n of qt.values())Xi(n,r);for(const n of Mc.values())Xi(n,r);return!0}function Pr(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ve(r){return r==null?!1:r.settings!==void 0}const Uc={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},We=new Zt("app","Firebase",Uc);class xc{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new st("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw We.create("app-deleted",{appName:this._name})}}const Tt=Dc;function Ws(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:vr,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw We.create("bad-app-name",{appName:String(o)});if(n||(n=js()),!n)throw We.create("no-options");const c=qt.get(o);if(c){if(it(n,c.options)&&it(i,c.config))return c;throw We.create("duplicate-app",{appName:o})}const u=new $a(o);for(const E of wr.values())u.addComponent(E);const I=new xc(n,i,u);return qt.set(o,I),I}function kr(r=vr){const e=qt.get(r);if(!e&&r===vr&&js())return Ws();if(!e)throw We.create("no-app",{appName:r});return e}function jc(){return Array.from(qt.values())}function ze(r,e,n){let i=Lc[r]??r;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ce.warn(u.join(" "));return}wt(new st(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Fc="firebase-heartbeat-database",Vc=1,Jt="firebase-heartbeat-store";let ur=null;function zs(){return ur||(ur=nc(Fc,Vc,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Jt)}catch(n){console.warn(n)}}}}).catch(r=>{throw We.create("idb-open",{originalErrorMessage:r.message})})),ur}async function Bc(r){try{const n=(await zs()).transaction(Jt),i=await n.objectStore(Jt).get(Gs(r));return await n.done,i}catch(e){if(e instanceof ke)Ce.warn(e.message);else{const n=We.create("idb-get",{originalErrorMessage:e?.message});Ce.warn(n.message)}}}async function Zi(r,e){try{const i=(await zs()).transaction(Jt,"readwrite");await i.objectStore(Jt).put(e,Gs(r)),await i.done}catch(n){if(n instanceof ke)Ce.warn(n.message);else{const i=We.create("idb-set",{originalErrorMessage:n?.message});Ce.warn(i.message)}}}function Gs(r){return`${r.name}!${r.options.appId}`}const Hc=1024,$c=30;class Wc{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Gc(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qi();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>$c){const o=qc(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ce.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Qi(),{heartbeatsToSend:n,unsentEntries:i}=zc(this._heartbeatsCache.heartbeats),o=Sn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ce.warn(e),""}}}function Qi(){return new Date().toISOString().substring(0,10)}function zc(r,e=Hc){const n=[];let i=r.slice();for(const o of r){const c=n.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),es(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),es(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Gc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Na()?Oa().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bc(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zi(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zi(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function es(r){return Sn(JSON.stringify({version:2,heartbeats:r})).length}function qc(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}function Jc(r){wt(new st("platform-logger",e=>new sc(e),"PRIVATE")),wt(new st("heartbeat",e=>new Wc(e),"PRIVATE")),ze(yr,Yi,r),ze(yr,Yi,"esm2020"),ze("fire-js","")}Jc("");var Kc="firebase",Yc="12.9.0";ze(Kc,Yc,"app");var ts=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Nr;(function(){var r;function e(p,l){function d(){}d.prototype=l.prototype,p.F=l.prototype,p.prototype=new d,p.prototype.constructor=p,p.D=function(_,g,v){for(var f=Array(arguments.length-2),X=2;X<arguments.length;X++)f[X-2]=arguments[X];return l.prototype[g].apply(_,f)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(p,l,d){d||(d=0);const _=Array(16);if(typeof l=="string")for(var g=0;g<16;++g)_[g]=l.charCodeAt(d++)|l.charCodeAt(d++)<<8|l.charCodeAt(d++)<<16|l.charCodeAt(d++)<<24;else for(g=0;g<16;++g)_[g]=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;l=p.g[0],d=p.g[1],g=p.g[2];let v=p.g[3],f;f=l+(v^d&(g^v))+_[0]+3614090360&4294967295,l=d+(f<<7&4294967295|f>>>25),f=v+(g^l&(d^g))+_[1]+3905402710&4294967295,v=l+(f<<12&4294967295|f>>>20),f=g+(d^v&(l^d))+_[2]+606105819&4294967295,g=v+(f<<17&4294967295|f>>>15),f=d+(l^g&(v^l))+_[3]+3250441966&4294967295,d=g+(f<<22&4294967295|f>>>10),f=l+(v^d&(g^v))+_[4]+4118548399&4294967295,l=d+(f<<7&4294967295|f>>>25),f=v+(g^l&(d^g))+_[5]+1200080426&4294967295,v=l+(f<<12&4294967295|f>>>20),f=g+(d^v&(l^d))+_[6]+2821735955&4294967295,g=v+(f<<17&4294967295|f>>>15),f=d+(l^g&(v^l))+_[7]+4249261313&4294967295,d=g+(f<<22&4294967295|f>>>10),f=l+(v^d&(g^v))+_[8]+1770035416&4294967295,l=d+(f<<7&4294967295|f>>>25),f=v+(g^l&(d^g))+_[9]+2336552879&4294967295,v=l+(f<<12&4294967295|f>>>20),f=g+(d^v&(l^d))+_[10]+4294925233&4294967295,g=v+(f<<17&4294967295|f>>>15),f=d+(l^g&(v^l))+_[11]+2304563134&4294967295,d=g+(f<<22&4294967295|f>>>10),f=l+(v^d&(g^v))+_[12]+1804603682&4294967295,l=d+(f<<7&4294967295|f>>>25),f=v+(g^l&(d^g))+_[13]+4254626195&4294967295,v=l+(f<<12&4294967295|f>>>20),f=g+(d^v&(l^d))+_[14]+2792965006&4294967295,g=v+(f<<17&4294967295|f>>>15),f=d+(l^g&(v^l))+_[15]+1236535329&4294967295,d=g+(f<<22&4294967295|f>>>10),f=l+(g^v&(d^g))+_[1]+4129170786&4294967295,l=d+(f<<5&4294967295|f>>>27),f=v+(d^g&(l^d))+_[6]+3225465664&4294967295,v=l+(f<<9&4294967295|f>>>23),f=g+(l^d&(v^l))+_[11]+643717713&4294967295,g=v+(f<<14&4294967295|f>>>18),f=d+(v^l&(g^v))+_[0]+3921069994&4294967295,d=g+(f<<20&4294967295|f>>>12),f=l+(g^v&(d^g))+_[5]+3593408605&4294967295,l=d+(f<<5&4294967295|f>>>27),f=v+(d^g&(l^d))+_[10]+38016083&4294967295,v=l+(f<<9&4294967295|f>>>23),f=g+(l^d&(v^l))+_[15]+3634488961&4294967295,g=v+(f<<14&4294967295|f>>>18),f=d+(v^l&(g^v))+_[4]+3889429448&4294967295,d=g+(f<<20&4294967295|f>>>12),f=l+(g^v&(d^g))+_[9]+568446438&4294967295,l=d+(f<<5&4294967295|f>>>27),f=v+(d^g&(l^d))+_[14]+3275163606&4294967295,v=l+(f<<9&4294967295|f>>>23),f=g+(l^d&(v^l))+_[3]+4107603335&4294967295,g=v+(f<<14&4294967295|f>>>18),f=d+(v^l&(g^v))+_[8]+1163531501&4294967295,d=g+(f<<20&4294967295|f>>>12),f=l+(g^v&(d^g))+_[13]+2850285829&4294967295,l=d+(f<<5&4294967295|f>>>27),f=v+(d^g&(l^d))+_[2]+4243563512&4294967295,v=l+(f<<9&4294967295|f>>>23),f=g+(l^d&(v^l))+_[7]+1735328473&4294967295,g=v+(f<<14&4294967295|f>>>18),f=d+(v^l&(g^v))+_[12]+2368359562&4294967295,d=g+(f<<20&4294967295|f>>>12),f=l+(d^g^v)+_[5]+4294588738&4294967295,l=d+(f<<4&4294967295|f>>>28),f=v+(l^d^g)+_[8]+2272392833&4294967295,v=l+(f<<11&4294967295|f>>>21),f=g+(v^l^d)+_[11]+1839030562&4294967295,g=v+(f<<16&4294967295|f>>>16),f=d+(g^v^l)+_[14]+4259657740&4294967295,d=g+(f<<23&4294967295|f>>>9),f=l+(d^g^v)+_[1]+2763975236&4294967295,l=d+(f<<4&4294967295|f>>>28),f=v+(l^d^g)+_[4]+1272893353&4294967295,v=l+(f<<11&4294967295|f>>>21),f=g+(v^l^d)+_[7]+4139469664&4294967295,g=v+(f<<16&4294967295|f>>>16),f=d+(g^v^l)+_[10]+3200236656&4294967295,d=g+(f<<23&4294967295|f>>>9),f=l+(d^g^v)+_[13]+681279174&4294967295,l=d+(f<<4&4294967295|f>>>28),f=v+(l^d^g)+_[0]+3936430074&4294967295,v=l+(f<<11&4294967295|f>>>21),f=g+(v^l^d)+_[3]+3572445317&4294967295,g=v+(f<<16&4294967295|f>>>16),f=d+(g^v^l)+_[6]+76029189&4294967295,d=g+(f<<23&4294967295|f>>>9),f=l+(d^g^v)+_[9]+3654602809&4294967295,l=d+(f<<4&4294967295|f>>>28),f=v+(l^d^g)+_[12]+3873151461&4294967295,v=l+(f<<11&4294967295|f>>>21),f=g+(v^l^d)+_[15]+530742520&4294967295,g=v+(f<<16&4294967295|f>>>16),f=d+(g^v^l)+_[2]+3299628645&4294967295,d=g+(f<<23&4294967295|f>>>9),f=l+(g^(d|~v))+_[0]+4096336452&4294967295,l=d+(f<<6&4294967295|f>>>26),f=v+(d^(l|~g))+_[7]+1126891415&4294967295,v=l+(f<<10&4294967295|f>>>22),f=g+(l^(v|~d))+_[14]+2878612391&4294967295,g=v+(f<<15&4294967295|f>>>17),f=d+(v^(g|~l))+_[5]+4237533241&4294967295,d=g+(f<<21&4294967295|f>>>11),f=l+(g^(d|~v))+_[12]+1700485571&4294967295,l=d+(f<<6&4294967295|f>>>26),f=v+(d^(l|~g))+_[3]+2399980690&4294967295,v=l+(f<<10&4294967295|f>>>22),f=g+(l^(v|~d))+_[10]+4293915773&4294967295,g=v+(f<<15&4294967295|f>>>17),f=d+(v^(g|~l))+_[1]+2240044497&4294967295,d=g+(f<<21&4294967295|f>>>11),f=l+(g^(d|~v))+_[8]+1873313359&4294967295,l=d+(f<<6&4294967295|f>>>26),f=v+(d^(l|~g))+_[15]+4264355552&4294967295,v=l+(f<<10&4294967295|f>>>22),f=g+(l^(v|~d))+_[6]+2734768916&4294967295,g=v+(f<<15&4294967295|f>>>17),f=d+(v^(g|~l))+_[13]+1309151649&4294967295,d=g+(f<<21&4294967295|f>>>11),f=l+(g^(d|~v))+_[4]+4149444226&4294967295,l=d+(f<<6&4294967295|f>>>26),f=v+(d^(l|~g))+_[11]+3174756917&4294967295,v=l+(f<<10&4294967295|f>>>22),f=g+(l^(v|~d))+_[2]+718787259&4294967295,g=v+(f<<15&4294967295|f>>>17),f=d+(v^(g|~l))+_[9]+3951481745&4294967295,p.g[0]=p.g[0]+l&4294967295,p.g[1]=p.g[1]+(g+(f<<21&4294967295|f>>>11))&4294967295,p.g[2]=p.g[2]+g&4294967295,p.g[3]=p.g[3]+v&4294967295}i.prototype.v=function(p,l){l===void 0&&(l=p.length);const d=l-this.blockSize,_=this.C;let g=this.h,v=0;for(;v<l;){if(g==0)for(;v<=d;)o(this,p,v),v+=this.blockSize;if(typeof p=="string"){for(;v<l;)if(_[g++]=p.charCodeAt(v++),g==this.blockSize){o(this,_),g=0;break}}else for(;v<l;)if(_[g++]=p[v++],g==this.blockSize){o(this,_),g=0;break}}this.h=g,this.o+=l},i.prototype.A=function(){var p=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);p[0]=128;for(var l=1;l<p.length-8;++l)p[l]=0;l=this.o*8;for(var d=p.length-8;d<p.length;++d)p[d]=l&255,l/=256;for(this.v(p),p=Array(16),l=0,d=0;d<4;++d)for(let _=0;_<32;_+=8)p[l++]=this.g[d]>>>_&255;return p};function c(p,l){var d=I;return Object.prototype.hasOwnProperty.call(d,p)?d[p]:d[p]=l(p)}function u(p,l){this.h=l;const d=[];let _=!0;for(let g=p.length-1;g>=0;g--){const v=p[g]|0;_&&v==l||(d[g]=v,_=!1)}this.g=d}var I={};function E(p){return-128<=p&&p<128?c(p,function(l){return new u([l|0],l<0?-1:0)}):new u([p|0],p<0?-1:0)}function T(p){if(isNaN(p)||!isFinite(p))return C;if(p<0)return H(T(-p));const l=[];let d=1;for(let _=0;p>=d;_++)l[_]=p/d|0,d*=4294967296;return new u(l,0)}function R(p,l){if(p.length==0)throw Error("number format error: empty string");if(l=l||10,l<2||36<l)throw Error("radix out of range: "+l);if(p.charAt(0)=="-")return H(R(p.substring(1),l));if(p.indexOf("-")>=0)throw Error('number format error: interior "-" character');const d=T(Math.pow(l,8));let _=C;for(let v=0;v<p.length;v+=8){var g=Math.min(8,p.length-v);const f=parseInt(p.substring(v,v+g),l);g<8?(g=T(Math.pow(l,g)),_=_.j(g).add(T(f))):(_=_.j(d),_=_.add(T(f)))}return _}var C=E(0),b=E(1),W=E(16777216);r=u.prototype,r.m=function(){if(G(this))return-H(this).m();let p=0,l=1;for(let d=0;d<this.g.length;d++){const _=this.i(d);p+=(_>=0?_:4294967296+_)*l,l*=4294967296}return p},r.toString=function(p){if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(B(this))return"0";if(G(this))return"-"+H(this).toString(p);const l=T(Math.pow(p,6));var d=this;let _="";for(;;){const g=he(d,l).g;d=J(d,g.j(l));let v=((d.g.length>0?d.g[0]:d.h)>>>0).toString(p);if(d=g,B(d))return v+_;for(;v.length<6;)v="0"+v;_=v+_}},r.i=function(p){return p<0?0:p<this.g.length?this.g[p]:this.h};function B(p){if(p.h!=0)return!1;for(let l=0;l<p.g.length;l++)if(p.g[l]!=0)return!1;return!0}function G(p){return p.h==-1}r.l=function(p){return p=J(this,p),G(p)?-1:B(p)?0:1};function H(p){const l=p.g.length,d=[];for(let _=0;_<l;_++)d[_]=~p.g[_];return new u(d,~p.h).add(b)}r.abs=function(){return G(this)?H(this):this},r.add=function(p){const l=Math.max(this.g.length,p.g.length),d=[];let _=0;for(let g=0;g<=l;g++){let v=_+(this.i(g)&65535)+(p.i(g)&65535),f=(v>>>16)+(this.i(g)>>>16)+(p.i(g)>>>16);_=f>>>16,v&=65535,f&=65535,d[g]=f<<16|v}return new u(d,d[d.length-1]&-2147483648?-1:0)};function J(p,l){return p.add(H(l))}r.j=function(p){if(B(this)||B(p))return C;if(G(this))return G(p)?H(this).j(H(p)):H(H(this).j(p));if(G(p))return H(this.j(H(p)));if(this.l(W)<0&&p.l(W)<0)return T(this.m()*p.m());const l=this.g.length+p.g.length,d=[];for(var _=0;_<2*l;_++)d[_]=0;for(_=0;_<this.g.length;_++)for(let g=0;g<p.g.length;g++){const v=this.i(_)>>>16,f=this.i(_)&65535,X=p.i(g)>>>16,Te=p.i(g)&65535;d[2*_+2*g]+=f*Te,ee(d,2*_+2*g),d[2*_+2*g+1]+=v*Te,ee(d,2*_+2*g+1),d[2*_+2*g+1]+=f*X,ee(d,2*_+2*g+1),d[2*_+2*g+2]+=v*X,ee(d,2*_+2*g+2)}for(p=0;p<l;p++)d[p]=d[2*p+1]<<16|d[2*p];for(p=l;p<2*l;p++)d[p]=0;return new u(d,0)};function ee(p,l){for(;(p[l]&65535)!=p[l];)p[l+1]+=p[l]>>>16,p[l]&=65535,l++}function te(p,l){this.g=p,this.h=l}function he(p,l){if(B(l))throw Error("division by zero");if(B(p))return new te(C,C);if(G(p))return l=he(H(p),l),new te(H(l.g),H(l.h));if(G(l))return l=he(p,H(l)),new te(H(l.g),l.h);if(p.g.length>30){if(G(p)||G(l))throw Error("slowDivide_ only works with positive integers.");for(var d=b,_=l;_.l(p)<=0;)d=le(d),_=le(_);var g=ne(d,1),v=ne(_,1);for(_=ne(_,2),d=ne(d,2);!B(_);){var f=v.add(_);f.l(p)<=0&&(g=g.add(d),v=f),_=ne(_,1),d=ne(d,1)}return l=J(p,g.j(l)),new te(g,l)}for(g=C;p.l(l)>=0;){for(d=Math.max(1,Math.floor(p.m()/l.m())),_=Math.ceil(Math.log(d)/Math.LN2),_=_<=48?1:Math.pow(2,_-48),v=T(d),f=v.j(l);G(f)||f.l(p)>0;)d-=_,v=T(d),f=v.j(l);B(v)&&(v=b),g=g.add(v),p=J(p,f)}return new te(g,p)}r.B=function(p){return he(this,p).h},r.and=function(p){const l=Math.max(this.g.length,p.g.length),d=[];for(let _=0;_<l;_++)d[_]=this.i(_)&p.i(_);return new u(d,this.h&p.h)},r.or=function(p){const l=Math.max(this.g.length,p.g.length),d=[];for(let _=0;_<l;_++)d[_]=this.i(_)|p.i(_);return new u(d,this.h|p.h)},r.xor=function(p){const l=Math.max(this.g.length,p.g.length),d=[];for(let _=0;_<l;_++)d[_]=this.i(_)^p.i(_);return new u(d,this.h^p.h)};function le(p){const l=p.g.length+1,d=[];for(let _=0;_<l;_++)d[_]=p.i(_)<<1|p.i(_-1)>>>31;return new u(d,p.h)}function ne(p,l){const d=l>>5;l%=32;const _=p.g.length-d,g=[];for(let v=0;v<_;v++)g[v]=l>0?p.i(v+d)>>>l|p.i(v+d+1)<<32-l:p.i(v+d);return new u(g,p.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=T,u.fromString=R,Nr=u}).apply(typeof ts<"u"?ts:typeof self<"u"?self:typeof window<"u"?window:{});var gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var r,e=Object.defineProperty;function n(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof gn=="object"&&gn];for(var s=0;s<t.length;++s){var a=t[s];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")}var i=n(this);function o(t,s){if(s)e:{var a=i;t=t.split(".");for(var h=0;h<t.length-1;h++){var y=t[h];if(!(y in a))break e;a=a[y]}t=t[t.length-1],h=a[t],s=s(h),s!=h&&s!=null&&e(a,t,{configurable:!0,writable:!0,value:s})}}o("Symbol.dispose",function(t){return t||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(t){return t||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(t){return t||function(s){var a=[],h;for(h in s)Object.prototype.hasOwnProperty.call(s,h)&&a.push([h,s[h]]);return a}});var c=c||{},u=this||self;function I(t){var s=typeof t;return s=="object"&&t!=null||s=="function"}function E(t,s,a){return t.call.apply(t.bind,arguments)}function T(t,s,a){return T=E,T.apply(null,arguments)}function R(t,s){var a=Array.prototype.slice.call(arguments,1);return function(){var h=a.slice();return h.push.apply(h,arguments),t.apply(this,h)}}function C(t,s){function a(){}a.prototype=s.prototype,t.Z=s.prototype,t.prototype=new a,t.prototype.constructor=t,t.Ob=function(h,y,w){for(var A=Array(arguments.length-2),D=2;D<arguments.length;D++)A[D-2]=arguments[D];return s.prototype[y].apply(h,A)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?t=>t&&AsyncContext.Snapshot.wrap(t):t=>t;function W(t){const s=t.length;if(s>0){const a=Array(s);for(let h=0;h<s;h++)a[h]=t[h];return a}return[]}function B(t,s){for(let h=1;h<arguments.length;h++){const y=arguments[h];var a=typeof y;if(a=a!="object"?a:y?Array.isArray(y)?"array":a:"null",a=="array"||a=="object"&&typeof y.length=="number"){a=t.length||0;const w=y.length||0;t.length=a+w;for(let A=0;A<w;A++)t[a+A]=y[A]}else t.push(y)}}class G{constructor(s,a){this.i=s,this.j=a,this.h=0,this.g=null}get(){let s;return this.h>0?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}function H(t){u.setTimeout(()=>{throw t},0)}function J(){var t=p;let s=null;return t.g&&(s=t.g,t.g=t.g.next,t.g||(t.h=null),s.next=null),s}class ee{constructor(){this.h=this.g=null}add(s,a){const h=te.get();h.set(s,a),this.h?this.h.next=h:this.g=h,this.h=h}}var te=new G(()=>new he,t=>t.reset());class he{constructor(){this.next=this.g=this.h=null}set(s,a){this.h=s,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ne=!1,p=new ee,l=()=>{const t=Promise.resolve(void 0);le=()=>{t.then(d)}};function d(){for(var t;t=J();){try{t.h.call(t.g)}catch(a){H(a)}var s=te;s.j(t),s.h<100&&(s.h++,t.next=s.g,s.g=t)}ne=!1}function _(){this.u=this.u,this.C=this.C}_.prototype.u=!1,_.prototype.dispose=function(){this.u||(this.u=!0,this.N())},_.prototype[Symbol.dispose]=function(){this.dispose()},_.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function g(t,s){this.type=t,this.g=this.target=s,this.defaultPrevented=!1}g.prototype.h=function(){this.defaultPrevented=!0};var v=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,s=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const a=()=>{};u.addEventListener("test",a,s),u.removeEventListener("test",a,s)}catch{}return t})();function f(t){return/^[\s\xa0]*$/.test(t)}function X(t,s){g.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t&&this.init(t,s)}C(X,g),X.prototype.init=function(t,s){const a=this.type=t.type,h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;this.target=t.target||t.srcElement,this.g=s,s=t.relatedTarget,s||(a=="mouseover"?s=t.fromElement:a=="mouseout"&&(s=t.toElement)),this.relatedTarget=s,h?(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=t.pointerType,this.state=t.state,this.i=t,t.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function ht(t,s,a,h,y){this.listener=t,this.proxy=null,this.src=s,this.type=a,this.capture=!!h,this.ha=y,this.key=++Ne,this.da=this.fa=!1}function ut(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function qe(t,s,a){for(const h in t)s.call(a,t[h],h,t)}function Ln(t,s){for(const a in t)s.call(void 0,t[a],a,t)}function m(t){const s={};for(const a in t)s[a]=t[a];return s}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(t,s){let a,h;for(let y=1;y<arguments.length;y++){h=arguments[y];for(a in h)t[a]=h[a];for(let w=0;w<S.length;w++)a=S[w],Object.prototype.hasOwnProperty.call(h,a)&&(t[a]=h[a])}}function P(t){this.src=t,this.g={},this.h=0}P.prototype.add=function(t,s,a,h,y){const w=t.toString();t=this.g[w],t||(t=this.g[w]=[],this.h++);const A=j(t,s,h,y);return A>-1?(s=t[A],a||(s.fa=!1)):(s=new ht(s,this.src,w,!!h,y),s.fa=a,t.push(s)),s};function L(t,s){const a=s.type;if(a in t.g){var h=t.g[a],y=Array.prototype.indexOf.call(h,s,void 0),w;(w=y>=0)&&Array.prototype.splice.call(h,y,1),w&&(ut(s),t.g[a].length==0&&(delete t.g[a],t.h--))}}function j(t,s,a,h){for(let y=0;y<t.length;++y){const w=t[y];if(!w.da&&w.listener==s&&w.capture==!!a&&w.ha==h)return y}return-1}var V="closure_lm_"+(Math.random()*1e6|0),ce={};function Q(t,s,a,h,y){if(Array.isArray(s)){for(let w=0;w<s.length;w++)Q(t,s[w],a,h,y);return null}return a=qr(a),t&&t[Te]?t.J(s,a,I(h)?!!h.capture:!1,y):Mn(t,s,a,!1,h,y)}function Mn(t,s,a,h,y,w){if(!s)throw Error("Invalid event type");const A=I(y)?!!y.capture:!!y;let D=xn(t);if(D||(t[V]=D=new P(t)),a=D.add(s,a,h,A,w),a.proxy)return a;if(h=Do(),a.proxy=h,h.src=t,h.listener=a,t.addEventListener)v||(y=A),y===void 0&&(y=!1),t.addEventListener(s.toString(),h,y);else if(t.attachEvent)t.attachEvent(Gr(s.toString()),h);else if(t.addListener&&t.removeListener)t.addListener(h);else throw Error("addEventListener and attachEvent are unavailable.");return a}function Do(){function t(a){return s.call(t.src,t.listener,a)}const s=Lo;return t}function zr(t,s,a,h,y){if(Array.isArray(s))for(var w=0;w<s.length;w++)zr(t,s[w],a,h,y);else h=I(h)?!!h.capture:!!h,a=qr(a),t&&t[Te]?(t=t.i,w=String(s).toString(),w in t.g&&(s=t.g[w],a=j(s,a,h,y),a>-1&&(ut(s[a]),Array.prototype.splice.call(s,a,1),s.length==0&&(delete t.g[w],t.h--)))):t&&(t=xn(t))&&(s=t.g[s.toString()],t=-1,s&&(t=j(s,a,h,y)),(a=t>-1?s[t]:null)&&Un(a))}function Un(t){if(typeof t!="number"&&t&&!t.da){var s=t.src;if(s&&s[Te])L(s.i,t);else{var a=t.type,h=t.proxy;s.removeEventListener?s.removeEventListener(a,h,t.capture):s.detachEvent?s.detachEvent(Gr(a),h):s.addListener&&s.removeListener&&s.removeListener(h),(a=xn(s))?(L(a,t),a.h==0&&(a.src=null,s[V]=null)):ut(t)}}}function Gr(t){return t in ce?ce[t]:ce[t]="on"+t}function Lo(t,s){if(t.da)t=!0;else{s=new X(s,this);const a=t.listener,h=t.ha||t.src;t.fa&&Un(t),t=a.call(h,s)}return t}function xn(t){return t=t[V],t instanceof P?t:null}var jn="__closure_events_fn_"+(Math.random()*1e9>>>0);function qr(t){return typeof t=="function"?t:(t[jn]||(t[jn]=function(s){return t.handleEvent(s)}),t[jn])}function re(){_.call(this),this.i=new P(this),this.M=this,this.G=null}C(re,_),re.prototype[Te]=!0,re.prototype.removeEventListener=function(t,s,a,h){zr(this,t,s,a,h)};function ie(t,s){var a,h=t.G;if(h)for(a=[];h;h=h.G)a.push(h);if(t=t.M,h=s.type||s,typeof s=="string")s=new g(s,t);else if(s instanceof g)s.target=s.target||t;else{var y=s;s=new g(h,t),N(s,y)}y=!0;let w,A;if(a)for(A=a.length-1;A>=0;A--)w=s.g=a[A],y=on(w,h,!0,s)&&y;if(w=s.g=t,y=on(w,h,!0,s)&&y,y=on(w,h,!1,s)&&y,a)for(A=0;A<a.length;A++)w=s.g=a[A],y=on(w,h,!1,s)&&y}re.prototype.N=function(){if(re.Z.N.call(this),this.i){var t=this.i;for(const s in t.g){const a=t.g[s];for(let h=0;h<a.length;h++)ut(a[h]);delete t.g[s],t.h--}}this.G=null},re.prototype.J=function(t,s,a,h){return this.i.add(String(t),s,!1,a,h)},re.prototype.K=function(t,s,a,h){return this.i.add(String(t),s,!0,a,h)};function on(t,s,a,h){if(s=t.i.g[String(s)],!s)return!0;s=s.concat();let y=!0;for(let w=0;w<s.length;++w){const A=s[w];if(A&&!A.da&&A.capture==a){const D=A.listener,Y=A.ha||A.src;A.fa&&L(t.i,A),y=D.call(Y,h)!==!1&&y}}return y&&!h.defaultPrevented}function Mo(t,s){if(typeof t!="function")if(t&&typeof t.handleEvent=="function")t=T(t.handleEvent,t);else throw Error("Invalid listener argument");return Number(s)>2147483647?-1:u.setTimeout(t,s||0)}function Jr(t){t.g=Mo(()=>{t.g=null,t.i&&(t.i=!1,Jr(t))},t.l);const s=t.h;t.h=null,t.m.apply(null,s)}class Uo extends _{constructor(s,a){super(),this.m=s,this.l=a,this.h=null,this.i=!1,this.g=null}j(s){this.h=arguments,this.g?this.i=!0:Jr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function At(t){_.call(this),this.h=t,this.g={}}C(At,_);var Kr=[];function Yr(t){qe(t.g,function(s,a){this.g.hasOwnProperty(a)&&Un(s)},t),t.g={}}At.prototype.N=function(){At.Z.N.call(this),Yr(this)},At.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=u.JSON.stringify,xo=u.JSON.parse,jo=class{stringify(t){return u.JSON.stringify(t,void 0)}parse(t){return u.JSON.parse(t,void 0)}};function Xr(){}function Fo(){}var bt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vn(){g.call(this,"d")}C(Vn,g);function Bn(){g.call(this,"c")}C(Bn,g);var lt={},Zr=null;function Hn(){return Zr=Zr||new re}lt.Ia="serverreachability";function Qr(t){g.call(this,lt.Ia,t)}C(Qr,g);function Ct(t){const s=Hn();ie(s,new Qr(s))}lt.STAT_EVENT="statevent";function ei(t,s){g.call(this,lt.STAT_EVENT,t),this.stat=s}C(ei,g);function se(t){const s=Hn();ie(s,new ei(s,t))}lt.Ja="timingevent";function ti(t,s){g.call(this,lt.Ja,t),this.size=s}C(ti,g);function Rt(t,s){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){t()},s)}function Pt(){this.g=!0}Pt.prototype.ua=function(){this.g=!1};function Vo(t,s,a,h,y,w){t.info(function(){if(t.g)if(w){var A="",D=w.split("&");for(let $=0;$<D.length;$++){var Y=D[$].split("=");if(Y.length>1){const Z=Y[0];Y=Y[1];const me=Z.split("_");A=me.length>=2&&me[1]=="type"?A+(Z+"="+Y+"&"):A+(Z+"=redacted&")}}}else A=null;else A=w;return"XMLHTTP REQ ("+h+") [attempt "+y+"]: "+s+`
`+a+`
`+A})}function Bo(t,s,a,h,y,w,A){t.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+y+"]: "+s+`
`+a+`
`+w+" "+A})}function ft(t,s,a,h){t.info(function(){return"XMLHTTP TEXT ("+s+"): "+$o(t,a)+(h?" "+h:"")})}function Ho(t,s){t.info(function(){return"TIMEOUT: "+s})}Pt.prototype.info=function(){};function $o(t,s){if(!t.g)return s;if(!s)return null;try{const w=JSON.parse(s);if(w){for(t=0;t<w.length;t++)if(Array.isArray(w[t])){var a=w[t];if(!(a.length<2)){var h=a[1];if(Array.isArray(h)&&!(h.length<1)){var y=h[0];if(y!="noop"&&y!="stop"&&y!="close")for(let A=1;A<h.length;A++)h[A]=""}}}}return Fn(w)}catch{return s}}var $n={NO_ERROR:0,TIMEOUT:8},Wo={},ni;function Wn(){}C(Wn,Xr),Wn.prototype.g=function(){return new XMLHttpRequest},ni=new Wn;function kt(t){return encodeURIComponent(String(t))}function zo(t){var s=1;t=t.split(":");const a=[];for(;s>0&&t.length;)a.push(t.shift()),s--;return t.length&&a.push(t.join(":")),a}function Oe(t,s,a,h){this.j=t,this.i=s,this.l=a,this.S=h||1,this.V=new At(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var ii={},zn={};function Gn(t,s,a){t.M=1,t.A=cn(ge(s)),t.u=a,t.R=!0,si(t,null)}function si(t,s){t.F=Date.now(),an(t),t.B=ge(t.A);var a=t.B,h=t.S;Array.isArray(h)||(h=[String(h)]),yi(a.i,"t",h),t.C=0,a=t.j.L,t.h=new ri,t.g=Ui(t.j,a?s:null,!t.u),t.P>0&&(t.O=new Uo(T(t.Y,t,t.g),t.P)),s=t.V,a=t.g,h=t.ba;var y="readystatechange";Array.isArray(y)||(y&&(Kr[0]=y.toString()),y=Kr);for(let w=0;w<y.length;w++){const A=Q(a,y[w],h||s.handleEvent,!1,s.h||s);if(!A)break;s.g[A.key]=A}s=t.J?m(t.J):{},t.u?(t.v||(t.v="POST"),s["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.B,t.v,t.u,s)):(t.v="GET",t.g.ea(t.B,t.v,null,s)),Ct(),Vo(t.i,t.v,t.B,t.l,t.S,t.u)}Oe.prototype.ba=function(t){t=t.target;const s=this.O;s&&Me(t)==3?s.j():this.Y(t)},Oe.prototype.Y=function(t){try{if(t==this.g)e:{const D=Me(this.g),Y=this.g.ya(),$=this.g.ca();if(!(D<3)&&(D!=3||this.g&&(this.h.h||this.g.la()||Ai(this.g)))){this.K||D!=4||Y==7||(Y==8||$<=0?Ct(3):Ct(2)),qn(this);var s=this.g.ca();this.X=s;var a=Go(this);if(this.o=s==200,Bo(this.i,this.v,this.B,this.l,this.S,D,s),this.o){if(this.U&&!this.L){t:{if(this.g){var h,y=this.g;if((h=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(h)){var w=h;break t}}w=null}if(t=w)ft(this.i,this.l,t,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Jn(this,t);else{this.o=!1,this.m=3,se(12),Je(this),Nt(this);break e}}if(this.R){t=!0;let Z;for(;!this.K&&this.C<a.length;)if(Z=qo(this,a),Z==zn){D==4&&(this.m=4,se(14),t=!1),ft(this.i,this.l,null,"[Incomplete Response]");break}else if(Z==ii){this.m=4,se(15),ft(this.i,this.l,a,"[Invalid Chunk]"),t=!1;break}else ft(this.i,this.l,Z,null),Jn(this,Z);if(oi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),D!=4||a.length!=0||this.h.h||(this.m=1,se(16),t=!1),this.o=this.o&&t,!t)ft(this.i,this.l,a,"[Invalid Chunked Response]"),Je(this),Nt(this);else if(a.length>0&&!this.W){this.W=!0;var A=this.j;A.g==this&&A.aa&&!A.P&&(A.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),nr(A),A.P=!0,se(11))}}else ft(this.i,this.l,a,null),Jn(this,a);D==4&&Je(this),this.o&&!this.K&&(D==4?Oi(this.j,this):(this.o=!1,an(this)))}else aa(this.g),s==400&&a.indexOf("Unknown SID")>0?(this.m=3,se(12)):(this.m=0,se(13)),Je(this),Nt(this)}}}catch{}};function Go(t){if(!oi(t))return t.g.la();const s=Ai(t.g);if(s==="")return"";let a="";const h=s.length,y=Me(t.g)==4;if(!t.h.i){if(typeof TextDecoder>"u")return Je(t),Nt(t),"";t.h.i=new u.TextDecoder}for(let w=0;w<h;w++)t.h.h=!0,a+=t.h.i.decode(s[w],{stream:!(y&&w==h-1)});return s.length=0,t.h.g+=a,t.C=0,t.h.g}function oi(t){return t.g?t.v=="GET"&&t.M!=2&&t.j.Aa:!1}function qo(t,s){var a=t.C,h=s.indexOf(`
`,a);return h==-1?zn:(a=Number(s.substring(a,h)),isNaN(a)?ii:(h+=1,h+a>s.length?zn:(s=s.slice(h,h+a),t.C=h+a,s)))}Oe.prototype.cancel=function(){this.K=!0,Je(this)};function an(t){t.T=Date.now()+t.H,ai(t,t.H)}function ai(t,s){if(t.D!=null)throw Error("WatchDog timer not null");t.D=Rt(T(t.aa,t),s)}function qn(t){t.D&&(u.clearTimeout(t.D),t.D=null)}Oe.prototype.aa=function(){this.D=null;const t=Date.now();t-this.T>=0?(Ho(this.i,this.B),this.M!=2&&(Ct(),se(17)),Je(this),this.m=2,Nt(this)):ai(this,this.T-t)};function Nt(t){t.j.I==0||t.K||Oi(t.j,t)}function Je(t){qn(t);var s=t.O;s&&typeof s.dispose=="function"&&s.dispose(),t.O=null,Yr(t.V),t.g&&(s=t.g,t.g=null,s.abort(),s.dispose())}function Jn(t,s){try{var a=t.j;if(a.I!=0&&(a.g==t||Kn(a.h,t))){if(!t.L&&Kn(a.h,t)&&a.I==3){try{var h=a.Ba.g.parse(s)}catch{h=null}if(Array.isArray(h)&&h.length==3){var y=h;if(y[0]==0){e:if(!a.v){if(a.g)if(a.g.F+3e3<t.F)dn(a),ln(a);else break e;tr(a),se(18)}}else a.xa=y[1],0<a.xa-a.K&&y[2]<37500&&a.F&&a.A==0&&!a.C&&(a.C=Rt(T(a.Va,a),6e3));ui(a.h)<=1&&a.ta&&(a.ta=void 0)}else Ye(a,11)}else if((t.L||a.g==t)&&dn(a),!f(s))for(y=a.Ba.g.parse(s),s=0;s<y.length;s++){let $=y[s];const Z=$[0];if(!(Z<=a.K))if(a.K=Z,$=$[1],a.I==2)if($[0]=="c"){a.M=$[1],a.ba=$[2];const me=$[3];me!=null&&(a.ka=me,a.j.info("VER="+a.ka));const Xe=$[4];Xe!=null&&(a.za=Xe,a.j.info("SVER="+a.za));const Ue=$[5];Ue!=null&&typeof Ue=="number"&&Ue>0&&(h=1.5*Ue,a.O=h,a.j.info("backChannelRequestTimeoutMs_="+h)),h=a;const xe=t.g;if(xe){const pn=xe.g?xe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pn){var w=h.h;w.g||pn.indexOf("spdy")==-1&&pn.indexOf("quic")==-1&&pn.indexOf("h2")==-1||(w.j=w.l,w.g=new Set,w.h&&(Yn(w,w.h),w.h=null))}if(h.G){const rr=xe.g?xe.g.getResponseHeader("X-HTTP-Session-Id"):null;rr&&(h.wa=rr,z(h.J,h.G,rr))}}a.I=3,a.l&&a.l.ra(),a.aa&&(a.T=Date.now()-t.F,a.j.info("Handshake RTT: "+a.T+"ms")),h=a;var A=t;if(h.na=Mi(h,h.L?h.ba:null,h.W),A.L){li(h.h,A);var D=A,Y=h.O;Y&&(D.H=Y),D.D&&(qn(D),an(D)),h.g=A}else ki(h);a.i.length>0&&fn(a)}else $[0]!="stop"&&$[0]!="close"||Ye(a,7);else a.I==3&&($[0]=="stop"||$[0]=="close"?$[0]=="stop"?Ye(a,7):er(a):$[0]!="noop"&&a.l&&a.l.qa($),a.A=0)}}Ct(4)}catch{}}var Jo=class{constructor(t,s){this.g=t,this.map=s}};function ci(t){this.l=t||10,u.PerformanceNavigationTiming?(t=u.performance.getEntriesByType("navigation"),t=t.length>0&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function hi(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ui(t){return t.h?1:t.g?t.g.size:0}function Kn(t,s){return t.h?t.h==s:t.g?t.g.has(s):!1}function Yn(t,s){t.g?t.g.add(s):t.h=s}function li(t,s){t.h&&t.h==s?t.h=null:t.g&&t.g.has(s)&&t.g.delete(s)}ci.prototype.cancel=function(){if(this.i=fi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function fi(t){if(t.h!=null)return t.i.concat(t.h.G);if(t.g!=null&&t.g.size!==0){let s=t.i;for(const a of t.g.values())s=s.concat(a.G);return s}return W(t.i)}var di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ko(t,s){if(t){t=t.split("&");for(let a=0;a<t.length;a++){const h=t[a].indexOf("=");let y,w=null;h>=0?(y=t[a].substring(0,h),w=t[a].substring(h+1)):y=t[a],s(y,w?decodeURIComponent(w.replace(/\+/g," ")):"")}}}function De(t){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let s;t instanceof De?(this.l=t.l,Ot(this,t.j),this.o=t.o,this.g=t.g,Dt(this,t.u),this.h=t.h,Xn(this,vi(t.i)),this.m=t.m):t&&(s=String(t).match(di))?(this.l=!1,Ot(this,s[1]||"",!0),this.o=Lt(s[2]||""),this.g=Lt(s[3]||"",!0),Dt(this,s[4]),this.h=Lt(s[5]||"",!0),Xn(this,s[6]||"",!0),this.m=Lt(s[7]||"")):(this.l=!1,this.i=new Ut(null,this.l))}De.prototype.toString=function(){const t=[];var s=this.j;s&&t.push(Mt(s,pi,!0),":");var a=this.g;return(a||s=="file")&&(t.push("//"),(s=this.o)&&t.push(Mt(s,pi,!0),"@"),t.push(kt(a).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.u,a!=null&&t.push(":",String(a))),(a=this.h)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(Mt(a,a.charAt(0)=="/"?Zo:Xo,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.m)&&t.push("#",Mt(a,ea)),t.join("")},De.prototype.resolve=function(t){const s=ge(this);let a=!!t.j;a?Ot(s,t.j):a=!!t.o,a?s.o=t.o:a=!!t.g,a?s.g=t.g:a=t.u!=null;var h=t.h;if(a)Dt(s,t.u);else if(a=!!t.h){if(h.charAt(0)!="/")if(this.g&&!this.h)h="/"+h;else{var y=s.h.lastIndexOf("/");y!=-1&&(h=s.h.slice(0,y+1)+h)}if(y=h,y==".."||y==".")h="";else if(y.indexOf("./")!=-1||y.indexOf("/.")!=-1){h=y.lastIndexOf("/",0)==0,y=y.split("/");const w=[];for(let A=0;A<y.length;){const D=y[A++];D=="."?h&&A==y.length&&w.push(""):D==".."?((w.length>1||w.length==1&&w[0]!="")&&w.pop(),h&&A==y.length&&w.push("")):(w.push(D),h=!0)}h=w.join("/")}else h=y}return a?s.h=h:a=t.i.toString()!=="",a?Xn(s,vi(t.i)):a=!!t.m,a&&(s.m=t.m),s};function ge(t){return new De(t)}function Ot(t,s,a){t.j=a?Lt(s,!0):s,t.j&&(t.j=t.j.replace(/:$/,""))}function Dt(t,s){if(s){if(s=Number(s),isNaN(s)||s<0)throw Error("Bad port number "+s);t.u=s}else t.u=null}function Xn(t,s,a){s instanceof Ut?(t.i=s,ta(t.i,t.l)):(a||(s=Mt(s,Qo)),t.i=new Ut(s,t.l))}function z(t,s,a){t.i.set(s,a)}function cn(t){return z(t,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),t}function Lt(t,s){return t?s?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Mt(t,s,a){return typeof t=="string"?(t=encodeURI(t).replace(s,Yo),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Yo(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var pi=/[#\/\?@]/g,Xo=/[#\?:]/g,Zo=/[#\?]/g,Qo=/[#\?@]/g,ea=/#/g;function Ut(t,s){this.h=this.g=null,this.i=t||null,this.j=!!s}function Ke(t){t.g||(t.g=new Map,t.h=0,t.i&&Ko(t.i,function(s,a){t.add(decodeURIComponent(s.replace(/\+/g," ")),a)}))}r=Ut.prototype,r.add=function(t,s){Ke(this),this.i=null,t=dt(this,t);let a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(s),this.h+=1,this};function gi(t,s){Ke(t),s=dt(t,s),t.g.has(s)&&(t.i=null,t.h-=t.g.get(s).length,t.g.delete(s))}function mi(t,s){return Ke(t),s=dt(t,s),t.g.has(s)}r.forEach=function(t,s){Ke(this),this.g.forEach(function(a,h){a.forEach(function(y){t.call(s,y,h,this)},this)},this)};function _i(t,s){Ke(t);let a=[];if(typeof s=="string")mi(t,s)&&(a=a.concat(t.g.get(dt(t,s))));else for(t=Array.from(t.g.values()),s=0;s<t.length;s++)a=a.concat(t[s]);return a}r.set=function(t,s){return Ke(this),this.i=null,t=dt(this,t),mi(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[s]),this.h+=1,this},r.get=function(t,s){return t?(t=_i(this,t),t.length>0?String(t[0]):s):s};function yi(t,s,a){gi(t,s),a.length>0&&(t.i=null,t.g.set(dt(t,s),W(a)),t.h+=a.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],s=Array.from(this.g.keys());for(let h=0;h<s.length;h++){var a=s[h];const y=kt(a);a=_i(this,a);for(let w=0;w<a.length;w++){let A=y;a[w]!==""&&(A+="="+kt(a[w])),t.push(A)}}return this.i=t.join("&")};function vi(t){const s=new Ut;return s.i=t.i,t.g&&(s.g=new Map(t.g),s.h=t.h),s}function dt(t,s){return s=String(s),t.j&&(s=s.toLowerCase()),s}function ta(t,s){s&&!t.j&&(Ke(t),t.i=null,t.g.forEach(function(a,h){const y=h.toLowerCase();h!=y&&(gi(this,h),yi(this,y,a))},t)),t.j=s}function na(t,s){const a=new Pt;if(u.Image){const h=new Image;h.onload=R(Le,a,"TestLoadImage: loaded",!0,s,h),h.onerror=R(Le,a,"TestLoadImage: error",!1,s,h),h.onabort=R(Le,a,"TestLoadImage: abort",!1,s,h),h.ontimeout=R(Le,a,"TestLoadImage: timeout",!1,s,h),u.setTimeout(function(){h.ontimeout&&h.ontimeout()},1e4),h.src=t}else s(!1)}function ra(t,s){const a=new Pt,h=new AbortController,y=setTimeout(()=>{h.abort(),Le(a,"TestPingServer: timeout",!1,s)},1e4);fetch(t,{signal:h.signal}).then(w=>{clearTimeout(y),w.ok?Le(a,"TestPingServer: ok",!0,s):Le(a,"TestPingServer: server error",!1,s)}).catch(()=>{clearTimeout(y),Le(a,"TestPingServer: error",!1,s)})}function Le(t,s,a,h,y){try{y&&(y.onload=null,y.onerror=null,y.onabort=null,y.ontimeout=null),h(a)}catch{}}function ia(){this.g=new jo}function Zn(t){this.i=t.Sb||null,this.h=t.ab||!1}C(Zn,Xr),Zn.prototype.g=function(){return new hn(this.i,this.h)};function hn(t,s){re.call(this),this.H=t,this.o=s,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(hn,re),r=hn.prototype,r.open=function(t,s){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=t,this.D=s,this.readyState=1,jt(this)},r.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const s={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};t&&(s.body=t),(this.H||u).fetch(new Request(this.D,s)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xt(this)),this.readyState=0},r.Pa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,jt(this)),this.g&&(this.readyState=3,jt(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wi(this)}else t.text().then(this.Oa.bind(this),this.ga.bind(this))};function wi(t){t.j.read().then(t.Ma.bind(t)).catch(t.ga.bind(t))}r.Ma=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var s=t.value?t.value:new Uint8Array(0);(s=this.B.decode(s,{stream:!t.done}))&&(this.response=this.responseText+=s)}t.done?xt(this):jt(this),this.readyState==3&&wi(this)}},r.Oa=function(t){this.g&&(this.response=this.responseText=t,xt(this))},r.Na=function(t){this.g&&(this.response=t,xt(this))},r.ga=function(){this.g&&xt(this)};function xt(t){t.readyState=4,t.l=null,t.j=null,t.B=null,jt(t)}r.setRequestHeader=function(t,s){this.A.append(t,s)},r.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],s=this.h.entries();for(var a=s.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=s.next();return t.join(`\r
`)};function jt(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(hn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});function Ii(t){let s="";return qe(t,function(a,h){s+=h,s+=":",s+=a,s+=`\r
`}),s}function Qn(t,s,a){e:{for(h in a){var h=!1;break e}h=!0}h||(a=Ii(a),typeof t=="string"?a!=null&&kt(a):z(t,s,a))}function q(t){re.call(this),this.headers=new Map,this.L=t||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(q,re);var sa=/^https?$/i,oa=["POST","PUT"];r=q.prototype,r.Fa=function(t){this.H=t},r.ea=function(t,s,a,h){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);s=s?s.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ni.g(),this.g.onreadystatechange=b(T(this.Ca,this));try{this.B=!0,this.g.open(s,String(t),!0),this.B=!1}catch(w){Ei(this,w);return}if(t=a||"",a=new Map(this.headers),h)if(Object.getPrototypeOf(h)===Object.prototype)for(var y in h)a.set(y,h[y]);else if(typeof h.keys=="function"&&typeof h.get=="function")for(const w of h.keys())a.set(w,h.get(w));else throw Error("Unknown input type for opt_headers: "+String(h));h=Array.from(a.keys()).find(w=>w.toLowerCase()=="content-type"),y=u.FormData&&t instanceof u.FormData,!(Array.prototype.indexOf.call(oa,s,void 0)>=0)||h||y||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[w,A]of a)this.g.setRequestHeader(w,A);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(w){Ei(this,w)}};function Ei(t,s){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=s,t.o=5,Ti(t),un(t)}function Ti(t){t.A||(t.A=!0,ie(t,"complete"),ie(t,"error"))}r.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=t||7,ie(this,"complete"),ie(this,"abort"),un(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),q.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Si(this):this.Xa())},r.Xa=function(){Si(this)};function Si(t){if(t.h&&typeof c<"u"){if(t.v&&Me(t)==4)setTimeout(t.Ca.bind(t),0);else if(ie(t,"readystatechange"),Me(t)==4){t.h=!1;try{const w=t.ca();e:switch(w){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var a;if(!(a=s)){var h;if(h=w===0){let A=String(t.D).match(di)[1]||null;!A&&u.self&&u.self.location&&(A=u.self.location.protocol.slice(0,-1)),h=!sa.test(A?A.toLowerCase():"")}a=h}if(a)ie(t,"complete"),ie(t,"success");else{t.o=6;try{var y=Me(t)>2?t.g.statusText:""}catch{y=""}t.l=y+" ["+t.ca()+"]",Ti(t)}}finally{un(t)}}}}function un(t,s){if(t.g){t.m&&(clearTimeout(t.m),t.m=null);const a=t.g;t.g=null,s||ie(t,"ready");try{a.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Me(t){return t.g?t.g.readyState:0}r.ca=function(){try{return Me(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(t){if(this.g){var s=this.g.responseText;return t&&s.indexOf(t)==0&&(s=s.substring(t.length)),xo(s)}};function Ai(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.F){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function aa(t){const s={};t=(t.g&&Me(t)>=2&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let h=0;h<t.length;h++){if(f(t[h]))continue;var a=zo(t[h]);const y=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();const w=s[y]||[];s[y]=w,w.push(a)}Ln(s,function(h){return h.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ft(t,s,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||s}function bi(t){this.za=0,this.i=[],this.j=new Pt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ft("failFast",!1,t),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ft("baseRetryDelayMs",5e3,t),this.Za=Ft("retryDelaySeedMs",1e4,t),this.Ta=Ft("forwardChannelMaxRetries",2,t),this.va=Ft("forwardChannelRequestTimeoutMs",2e4,t),this.ma=t&&t.xmlHttpFactory||void 0,this.Ua=t&&t.Rb||void 0,this.Aa=t&&t.useFetchStreams||!1,this.O=void 0,this.L=t&&t.supportsCrossDomainXhr||!1,this.M="",this.h=new ci(t&&t.concurrentRequestLimit),this.Ba=new ia,this.S=t&&t.fastHandshake||!1,this.R=t&&t.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=t&&t.Pb||!1,t&&t.ua&&this.j.ua(),t&&t.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&t&&t.detectBufferingProxy||!1,this.ia=void 0,t&&t.longPollingTimeout&&t.longPollingTimeout>0&&(this.ia=t.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=bi.prototype,r.ka=8,r.I=1,r.connect=function(t,s,a,h){se(0),this.W=t,this.H=s||{},a&&h!==void 0&&(this.H.OSID=a,this.H.OAID=h),this.F=this.X,this.J=Mi(this,null,this.W),fn(this)};function er(t){if(Ci(t),t.I==3){var s=t.V++,a=ge(t.J);if(z(a,"SID",t.M),z(a,"RID",s),z(a,"TYPE","terminate"),Vt(t,a),s=new Oe(t,t.j,s),s.M=2,s.A=cn(ge(a)),a=!1,u.navigator&&u.navigator.sendBeacon)try{a=u.navigator.sendBeacon(s.A.toString(),"")}catch{}!a&&u.Image&&(new Image().src=s.A,a=!0),a||(s.g=Ui(s.j,null),s.g.ea(s.A)),s.F=Date.now(),an(s)}Li(t)}function ln(t){t.g&&(nr(t),t.g.cancel(),t.g=null)}function Ci(t){ln(t),t.v&&(u.clearTimeout(t.v),t.v=null),dn(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&u.clearTimeout(t.m),t.m=null)}function fn(t){if(!hi(t.h)&&!t.m){t.m=!0;var s=t.Ea;le||l(),ne||(le(),ne=!0),p.add(s,t),t.D=0}}function ca(t,s){return ui(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=s.G.concat(t.i),!0):t.I==1||t.I==2||t.D>=(t.Sa?0:t.Ta)?!1:(t.m=Rt(T(t.Ea,t,s),Di(t,t.D)),t.D++,!0)}r.Ea=function(t){if(this.m)if(this.m=null,this.I==1){if(!t){this.V=Math.floor(Math.random()*1e5),t=this.V++;const y=new Oe(this,this.j,t);let w=this.o;if(this.U&&(w?(w=m(w),N(w,this.U)):w=this.U),this.u!==null||this.R||(y.J=w,w=null),this.S)e:{for(var s=0,a=0;a<this.i.length;a++){t:{var h=this.i[a];if("__data__"in h.map&&(h=h.map.__data__,typeof h=="string")){h=h.length;break t}h=void 0}if(h===void 0)break;if(s+=h,s>4096){s=a;break e}if(s===4096||a===this.i.length-1){s=a+1;break e}}s=1e3}else s=1e3;s=Pi(this,y,s),a=ge(this.J),z(a,"RID",t),z(a,"CVER",22),this.G&&z(a,"X-HTTP-Session-Id",this.G),Vt(this,a),w&&(this.R?s="headers="+kt(Ii(w))+"&"+s:this.u&&Qn(a,this.u,w)),Yn(this.h,y),this.Ra&&z(a,"TYPE","init"),this.S?(z(a,"$req",s),z(a,"SID","null"),y.U=!0,Gn(y,a,null)):Gn(y,a,s),this.I=2}}else this.I==3&&(t?Ri(this,t):this.i.length==0||hi(this.h)||Ri(this))};function Ri(t,s){var a;s?a=s.l:a=t.V++;const h=ge(t.J);z(h,"SID",t.M),z(h,"RID",a),z(h,"AID",t.K),Vt(t,h),t.u&&t.o&&Qn(h,t.u,t.o),a=new Oe(t,t.j,a,t.D+1),t.u===null&&(a.J=t.o),s&&(t.i=s.G.concat(t.i)),s=Pi(t,a,1e3),a.H=Math.round(t.va*.5)+Math.round(t.va*.5*Math.random()),Yn(t.h,a),Gn(a,h,s)}function Vt(t,s){t.H&&qe(t.H,function(a,h){z(s,h,a)}),t.l&&qe({},function(a,h){z(s,h,a)})}function Pi(t,s,a){a=Math.min(t.i.length,a);const h=t.l?T(t.l.Ka,t.l,t):null;e:{var y=t.i;let D=-1;for(;;){const Y=["count="+a];D==-1?a>0?(D=y[0].g,Y.push("ofs="+D)):D=0:Y.push("ofs="+D);let $=!0;for(let Z=0;Z<a;Z++){var w=y[Z].g;const me=y[Z].map;if(w-=D,w<0)D=Math.max(0,y[Z].g-100),$=!1;else try{w="req"+w+"_"||"";try{var A=me instanceof Map?me:Object.entries(me);for(const[Xe,Ue]of A){let xe=Ue;I(Ue)&&(xe=Fn(Ue)),Y.push(w+Xe+"="+encodeURIComponent(xe))}}catch(Xe){throw Y.push(w+"type="+encodeURIComponent("_badmap")),Xe}}catch{h&&h(me)}}if($){A=Y.join("&");break e}}A=void 0}return t=t.i.splice(0,a),s.G=t,A}function ki(t){if(!t.g&&!t.v){t.Y=1;var s=t.Da;le||l(),ne||(le(),ne=!0),p.add(s,t),t.A=0}}function tr(t){return t.g||t.v||t.A>=3?!1:(t.Y++,t.v=Rt(T(t.Da,t),Di(t,t.A)),t.A++,!0)}r.Da=function(){if(this.v=null,Ni(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var t=4*this.T;this.j.info("BP detection timer enabled: "+t),this.B=Rt(T(this.Wa,this),t)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,se(10),ln(this),Ni(this))};function nr(t){t.B!=null&&(u.clearTimeout(t.B),t.B=null)}function Ni(t){t.g=new Oe(t,t.j,"rpc",t.Y),t.u===null&&(t.g.J=t.o),t.g.P=0;var s=ge(t.na);z(s,"RID","rpc"),z(s,"SID",t.M),z(s,"AID",t.K),z(s,"CI",t.F?"0":"1"),!t.F&&t.ia&&z(s,"TO",t.ia),z(s,"TYPE","xmlhttp"),Vt(t,s),t.u&&t.o&&Qn(s,t.u,t.o),t.O&&(t.g.H=t.O);var a=t.g;t=t.ba,a.M=1,a.A=cn(ge(s)),a.u=null,a.R=!0,si(a,t)}r.Va=function(){this.C!=null&&(this.C=null,ln(this),tr(this),se(19))};function dn(t){t.C!=null&&(u.clearTimeout(t.C),t.C=null)}function Oi(t,s){var a=null;if(t.g==s){dn(t),nr(t),t.g=null;var h=2}else if(Kn(t.h,s))a=s.G,li(t.h,s),h=1;else return;if(t.I!=0){if(s.o)if(h==1){a=s.u?s.u.length:0,s=Date.now()-s.F;var y=t.D;h=Hn(),ie(h,new ti(h,a)),fn(t)}else ki(t);else if(y=s.m,y==3||y==0&&s.X>0||!(h==1&&ca(t,s)||h==2&&tr(t)))switch(a&&a.length>0&&(s=t.h,s.i=s.i.concat(a)),y){case 1:Ye(t,5);break;case 4:Ye(t,10);break;case 3:Ye(t,6);break;default:Ye(t,2)}}}function Di(t,s){let a=t.Qa+Math.floor(Math.random()*t.Za);return t.isActive()||(a*=2),a*s}function Ye(t,s){if(t.j.info("Error code "+s),s==2){var a=T(t.bb,t),h=t.Ua;const y=!h;h=new De(h||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ot(h,"https"),cn(h),y?na(h.toString(),a):ra(h.toString(),a)}else se(2);t.I=0,t.l&&t.l.pa(s),Li(t),Ci(t)}r.bb=function(t){t?(this.j.info("Successfully pinged google.com"),se(2)):(this.j.info("Failed to ping google.com"),se(1))};function Li(t){if(t.I=0,t.ja=[],t.l){const s=fi(t.h);(s.length!=0||t.i.length!=0)&&(B(t.ja,s),B(t.ja,t.i),t.h.i.length=0,W(t.i),t.i.length=0),t.l.oa()}}function Mi(t,s,a){var h=a instanceof De?ge(a):new De(a);if(h.g!="")s&&(h.g=s+"."+h.g),Dt(h,h.u);else{var y=u.location;h=y.protocol,s=s?s+"."+y.hostname:y.hostname,y=+y.port;const w=new De(null);h&&Ot(w,h),s&&(w.g=s),y&&Dt(w,y),a&&(w.h=a),h=w}return a=t.G,s=t.wa,a&&s&&z(h,a,s),z(h,"VER",t.ka),Vt(t,h),h}function Ui(t,s,a){if(s&&!t.L)throw Error("Can't create secondary domain capable XhrIo object.");return s=t.Aa&&!t.ma?new q(new Zn({ab:a})):new q(t.ma),s.Fa(t.L),s}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xi(){}r=xi.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ue(t,s){re.call(this),this.g=new bi(s),this.l=t,this.h=s&&s.messageUrlParams||null,t=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(t?t["X-WebChannel-Content-Type"]=s.messageContentType:t={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.sa&&(t?t["X-WebChannel-Client-Profile"]=s.sa:t={"X-WebChannel-Client-Profile":s.sa}),this.g.U=t,(t=s&&s.Qb)&&!f(t)&&(this.g.u=t),this.A=s&&s.supportsCrossDomainXhr||!1,this.v=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!f(s)&&(this.g.G=s,t=this.h,t!==null&&s in t&&(t=this.h,s in t&&delete t[s])),this.j=new pt(this)}C(ue,re),ue.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ue.prototype.close=function(){er(this.g)},ue.prototype.o=function(t){var s=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.v&&(a={},a.__data__=Fn(t),t=a);s.i.push(new Jo(s.Ya++,t)),s.I==3&&fn(s)},ue.prototype.N=function(){this.g.l=null,delete this.j,er(this.g),delete this.g,ue.Z.N.call(this)};function ji(t){Vn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var s=t.__sm__;if(s){e:{for(const a in s){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,s=s!==null&&t in s?s[t]:void 0),this.data=s}else this.data=t}C(ji,Vn);function Fi(){Bn.call(this),this.status=1}C(Fi,Bn);function pt(t){this.g=t}C(pt,xi),pt.prototype.ra=function(){ie(this.g,"a")},pt.prototype.qa=function(t){ie(this.g,new ji(t))},pt.prototype.pa=function(t){ie(this.g,new Fi)},pt.prototype.oa=function(){ie(this.g,"b")},ue.prototype.send=ue.prototype.o,ue.prototype.open=ue.prototype.m,ue.prototype.close=ue.prototype.close,$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,Wo.COMPLETE="complete",Fo.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",re.prototype.listen=re.prototype.J,q.prototype.listenOnce=q.prototype.K,q.prototype.getLastError=q.prototype.Ha,q.prototype.getLastErrorCode=q.prototype.ya,q.prototype.getStatus=q.prototype.ca,q.prototype.getResponseJson=q.prototype.La,q.prototype.getResponseText=q.prototype.la,q.prototype.send=q.prototype.ea,q.prototype.setWithCredentials=q.prototype.Fa}).apply(typeof gn<"u"?gn:typeof self<"u"?self:typeof window<"u"?window:{});class oe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oe.UNAUTHENTICATED=new oe(null),oe.GOOGLE_CREDENTIALS=new oe("google-credentials-uid"),oe.FIRST_PARTY=new oe("first-party-uid"),oe.MOCK_USER=new oe("mock-user");let en="12.9.0";function Xc(r){en=r}const It=new Cr("@firebase/firestore");function de(r,...e){if(It.logLevel<=F.DEBUG){const n=e.map(Or);It.debug(`Firestore (${en}): ${r}`,...n)}}function qs(r,...e){if(It.logLevel<=F.ERROR){const n=e.map(Or);It.error(`Firestore (${en}): ${r}`,...n)}}function Zc(r,...e){if(It.logLevel<=F.WARN){const n=e.map(Or);It.warn(`Firestore (${en}): ${r}`,...n)}}function Or(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Kt(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Js(r,i,n)}function Js(r,e,n){let i=`FIRESTORE (${en}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw qs(i),new Error(i)}function $t(r,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,r||Js(e,o,i)}const U={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class x extends ke{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wt{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Ks{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(oe.UNAUTHENTICATED)))}shutdown(){}}class eh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class th{constructor(e){this.t=e,this.currentUser=oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$t(this.o===void 0,42304);let i=this.i;const o=E=>this.i!==i?(i=this.i,n(E)):Promise.resolve();let c=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Wt,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const E=c;e.enqueueRetryable((async()=>{await E.promise,await o(this.currentUser)}))},I=E=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((E=>I(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?I(E):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Wt)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($t(typeof i.accessToken=="string",31837,{l:i}),new Ks(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $t(e===null||typeof e=="string",2055,{h:e}),new oe(e)}}class nh{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=oe.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class rh{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new nh(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(oe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ns{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ih{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ve(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$t(this.o===void 0,3512);const i=c=>{c.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,de("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ns(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ns(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sh(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}class oh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=sh(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<n&&(i+=e.charAt(o[c]%62))}return i}}function Ge(r,e){return r<e?-1:r>e?1:0}function ah(r,e){const n=Math.min(r.length,e.length);for(let i=0;i<n;i++){const o=r.charAt(i),c=e.charAt(i);if(o!==c)return lr(o)===lr(c)?Ge(o,c):lr(o)?1:-1}return Ge(r.length,e.length)}const ch=55296,hh=57343;function lr(r){const e=r.charCodeAt(0);return e>=ch&&e<=hh}const rs="__name__";class _e{constructor(e,n,i){n===void 0?n=0:n>e.length&&Kt(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Kt(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return _e.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _e?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const c=_e.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ge(e.length,n.length)}static compareSegments(e,n){const i=_e.isNumericId(e),o=_e.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?_e.extractNumericId(e).compare(_e.extractNumericId(n)):ah(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nr.fromString(e.substring(4,e.length-2))}}class fe extends _e{construct(e,n,i){return new fe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new x(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new fe(n)}static emptyPath(){return new fe([])}}const uh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends _e{construct(e,n,i){return new Qe(e,n,i)}static isValidIdentifier(e){return uh.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rs}static keyField(){return new Qe([rs])}static fromServerFormat(e){const n=[];let i="",o=0;const c=()=>{if(i.length===0)throw new x(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const I=e[o];if(I==="\\"){if(o+1===e.length)throw new x(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new x(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=E,o+=2}else I==="`"?(u=!u,o++):I!=="."||u?(i+=I,o++):(c(),o++)}if(c(),u)throw new x(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(fe.fromString(e))}static fromName(e){return new et(fe.fromString(e).popFirst(5))}static empty(){return new et(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new fe(e.slice()))}}function lh(r,e,n,i){if(e===!0&&i===!0)throw new x(U.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function fh(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function dh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Kt(12329,{type:typeof r})}function ph(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new x(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(r);throw new x(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function K(r,e){const n={typeString:r};return e&&(n.value=e),n}function tn(r,e){if(!fh(r))throw new x(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}const u=r[i];if(o&&typeof u!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new x(U.INVALID_ARGUMENT,n);return!0}const is=-62135596800,ss=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*ss);return new ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new x(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<is)throw new x(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ss}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tn(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-is;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:K("string",ye._jsonSchemaVersion),seconds:K("number"),nanoseconds:K("number")};function gh(r){return r.name==="IndexedDbTransactionError"}class mh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new mh("Invalid base64 string: "+c):c}})(e);return new ot(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const Ir="(default)";class An{constructor(e,n){this.projectId=e,this.database=n||Ir}static empty(){return new An("","")}get isDefaultDatabase(){return this.database===Ir}isEqual(e){return e instanceof An&&e.projectId===this.projectId&&e.database===this.database}}function _h(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new x(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new An(r.options.projectId,e)}class yh{constructor(e,n=null,i=[],o=[],c=null,u="F",I=null,E=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=u,this.startAt=I,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function vh(r){return new yh(r)}var os,M;(M=os||(os={}))[M.OK=0]="OK",M[M.CANCELLED=1]="CANCELLED",M[M.UNKNOWN=2]="UNKNOWN",M[M.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",M[M.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",M[M.NOT_FOUND=5]="NOT_FOUND",M[M.ALREADY_EXISTS=6]="ALREADY_EXISTS",M[M.PERMISSION_DENIED=7]="PERMISSION_DENIED",M[M.UNAUTHENTICATED=16]="UNAUTHENTICATED",M[M.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",M[M.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",M[M.ABORTED=10]="ABORTED",M[M.OUT_OF_RANGE=11]="OUT_OF_RANGE",M[M.UNIMPLEMENTED=12]="UNIMPLEMENTED",M[M.INTERNAL=13]="INTERNAL",M[M.UNAVAILABLE=14]="UNAVAILABLE",M[M.DATA_LOSS=15]="DATA_LOSS";new Nr([4294967295,4294967295],0);const wh=41943040;const Ih=1048576;function fr(){return typeof document<"u"?document:null}class Eh{constructor(e,n,i=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}class Dr{constructor(e,n,i,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,c){const u=Date.now()+i,I=new Dr(e,n,u,o,c);return I.start(i),I}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var as,cs;(cs=as||(as={})).Ma="default",cs.Cache="cache";function Th(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Sh="ComponentProvider",hs=new Map;const Ys="firestore.googleapis.com",us=!0;class ls{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new x(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ys,this.ssl=us}else this.host=e.host,this.ssl=e.ssl??us;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ih)throw new x(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Th(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new x(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new x(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new x(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xs{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ls({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ls(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Qc;switch(i.type){case"firstParty":return new rh(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new x(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=hs.get(n);i&&(de(Sh,"Removing Datastore"),hs.delete(n),i.terminate())})(this),Promise.resolve()}}function Ah(r,e,n,i={}){r=ph(r,Xs);const o=Xt(e),c=r._getSettings(),u={...c,emulatorOptions:r._getEmulatorOptions()},I=`${e}:${n}`;o&&(Vs(`https://${I}`),Bs("Firestore",!0)),c.host!==Ys&&c.host!==I&&Zc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...c,host:I,ssl:o,emulatorOptions:i};if(!it(E,u)&&(r._setSettings(E),i.mockUserToken)){let T,R;if(typeof i.mockUserToken=="string")T=i.mockUserToken,R=oe.MOCK_USER;else{T=Ta(i.mockUserToken,r._app?.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new x(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new oe(C)}r._authCredentials=new eh(new Ks(T,R))}}class Lr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class we{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new we(this.firestore,e,this._key)}toJSON(){return{type:we._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(tn(n,we._jsonSchema))return new we(e,i||null,new et(fe.fromString(n.referencePath)))}}we._jsonSchemaVersion="firestore/documentReference/1.0",we._jsonSchema={type:K("string",we._jsonSchemaVersion),referencePath:K("string")};class Mr extends Lr{constructor(e,n,i){super(e,n,vh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new we(this.firestore,null,new et(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}const fs="AsyncQueue";class ds{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Eh(this,"async_queue_retry"),this._c=()=>{const i=fr();i&&de(fs,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=fr();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fr();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!gh(e))throw e;de(fs,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,qs("INTERNAL UNHANDLED ERROR: ",ps(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Dr.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Kt(47125,{Pc:ps(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ps(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class bh extends Xs{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new ds,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ds(e),this._firestoreClient=void 0,await e}}}function Ch(r,e){const n=typeof r=="object"?r:kr(),i=typeof r=="string"?r:Ir,o=Pr(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=Ia("firestore");c&&Ah(o,...c)}return o}class Se{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Se(ot.fromBase64String(e))}catch(n){throw new x(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Se(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Se._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tn(e,Se._jsonSchema))return Se.fromBase64String(e.bytes)}}Se._jsonSchemaVersion="firestore/bytes/1.0",Se._jsonSchema={type:K("string",Se._jsonSchemaVersion),bytes:K("string")};class Zs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new x(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tt{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new x(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new x(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:tt._jsonSchemaVersion}}static fromJSON(e){if(tn(e,tt._jsonSchema))return new tt(e.latitude,e.longitude)}}tt._jsonSchemaVersion="firestore/geoPoint/1.0",tt._jsonSchema={type:K("string",tt._jsonSchemaVersion),latitude:K("number"),longitude:K("number")};class nt{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:nt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tn(e,nt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new nt(e.vectorValues);throw new x(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}nt._jsonSchemaVersion="firestore/vectorValue/1.0",nt._jsonSchema={type:K("string",nt._jsonSchemaVersion),vectorValues:K("object")};function Qs(r,e,n){if((e=ct(e))instanceof Zs)return e._internalPath;if(typeof e=="string")return Ph(r,e);throw Er("Field path arguments must be of type string or ",r)}const Rh=new RegExp("[~\\*/\\[\\]]");function Ph(r,e,n){if(e.search(Rh)>=0)throw Er(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new Zs(...e.split("."))._internalPath}catch{throw Er(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function Er(r,e,n,i,o){let c=`Function ${e}() called with invalid data`;c+=". ";let u="";return new x(U.INVALID_ARGUMENT,c+r+u)}const gs="@firebase/firestore",ms="4.11.0";class eo{constructor(e,n,i,o,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new we(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Qs("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kh extends eo{data(){return super.data()}}class mn{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mt extends eo{constructor(e,n,i,o,c,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Qs("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=mt._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mt._jsonSchemaVersion="firestore/documentSnapshot/1.0",mt._jsonSchema={type:K("string",mt._jsonSchemaVersion),bundleSource:K("string","DocumentSnapshot"),bundleName:K("string"),bundle:K("string")};class yn extends mt{data(e={}){return super.data(e)}}class zt{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new mn(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new yn(this._firestore,this._userDataWriter,i.key,i,new mn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((I=>{const E=new yn(o._firestore,o._userDataWriter,I.doc.key,I.doc,new mn(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);return I.doc,{type:"added",doc:E,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((I=>c||I.type!==3)).map((I=>{const E=new yn(o._firestore,o._userDataWriter,I.doc.key,I.doc,new mn(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let T=-1,R=-1;return I.type!==0&&(T=u.indexOf(I.doc.key),u=u.delete(I.doc.key)),I.type!==1&&(u=u.add(I.doc),R=u.indexOf(I.doc.key)),{type:Nh(I.type),doc:E,oldIndex:T,newIndex:R}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zt._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=oh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Nh(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kt(61501,{type:r})}}zt._jsonSchemaVersion="firestore/querySnapshot/1.0",zt._jsonSchema={type:K("string",zt._jsonSchemaVersion),bundleSource:K("string","QuerySnapshot"),bundleName:K("string"),bundle:K("string")};(function(e,n=!0){Xc(Tt),wt(new st("firestore",((i,{instanceIdentifier:o,options:c})=>{const u=i.getProvider("app").getImmediate(),I=new bh(new th(i.getProvider("auth-internal")),new ih(u,i.getProvider("app-check-internal")),_h(u,o),u);return c={useFetchStreams:n,...c},I._setSettings(c),I}),"PUBLIC").setMultipleInstances(!0)),ze(gs,ms,e),ze(gs,ms,"esm2020")})();function to(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oh=to,no=new Zt("auth","Firebase",to());const bn=new Cr("@firebase/auth");function Dh(r,...e){bn.logLevel<=F.WARN&&bn.warn(`Auth (${Tt}): ${r}`,...e)}function vn(r,...e){bn.logLevel<=F.ERROR&&bn.error(`Auth (${Tt}): ${r}`,...e)}function Re(r,...e){throw Ur(r,...e)}function Ie(r,...e){return Ur(r,...e)}function ro(r,e,n){const i={...Oh(),[e]:n};return new Zt("auth","Firebase",i).create(e,{appName:r.name})}function rt(r){return ro(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ur(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return no.create(r,...e)}function k(r,e,...n){if(!r)throw Ur(e,...n)}function Ae(r){const e="INTERNAL ASSERTION FAILED: "+r;throw vn(e),new Error(e)}function Pe(r,e){r||Ae(e)}function Tr(){return typeof self<"u"&&self.location?.href||""}function Lh(){return _s()==="http:"||_s()==="https:"}function _s(){return typeof self<"u"&&self.location?.protocol||null}function Mh(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lh()||Ra()||"connection"in navigator)?navigator.onLine:!0}function Uh(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class nn{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pe(n>e,"Short delay should be less than long delay!"),this.isMobile=ba()||Pa()}get(){return Mh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xr(r,e){Pe(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class io{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const jh=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fh=new nn(3e4,6e4);function jr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function St(r,e,n,i,o={}){return so(r,o,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const I=Qt({key:r.config.apiKey,...u}).slice(1),E=await r._getAdditionalHeaders();E["Content-Type"]="application/json",r.languageCode&&(E["X-Firebase-Locale"]=r.languageCode);const T={method:e,headers:E,...c};return Ca()||(T.referrerPolicy="no-referrer"),r.emulatorConfig&&Xt(r.emulatorConfig.host)&&(T.credentials="include"),io.fetch()(await oo(r,r.config.apiHost,n,I),T)})}async function so(r,e,n){r._canInitEmulator=!1;const i={...xh,...e};try{const o=new Bh(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw _n(r,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const I=c.ok?u.errorMessage:u.error.message,[E,T]=I.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw _n(r,"credential-already-in-use",u);if(E==="EMAIL_EXISTS")throw _n(r,"email-already-in-use",u);if(E==="USER_DISABLED")throw _n(r,"user-disabled",u);const R=i[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw ro(r,R,T);Re(r,R)}}catch(o){if(o instanceof ke)throw o;Re(r,"network-request-failed",{message:String(o)})}}async function Vh(r,e,n,i,o={}){const c=await St(r,e,n,i,o);return"mfaPendingCredential"in c&&Re(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function oo(r,e,n,i){const o=`${e}${n}?${i}`,c=r,u=c.config.emulator?xr(r.config,o):`${r.config.apiScheme}://${o}`;return jh.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}class Bh{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ie(this.auth,"network-request-failed")),Fh.get())})}}function _n(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ie(r,e,i);return o.customData._tokenResponse=n,o}async function Hh(r,e){return St(r,"POST","/v1/accounts:delete",e)}async function Cn(r,e){return St(r,"POST","/v1/accounts:lookup",e)}function Gt(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $h(r,e=!1){const n=ct(r),i=await n.getIdToken(e),o=Fr(i);k(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c?.sign_in_provider;return{claims:o,token:i,authTime:Gt(dr(o.auth_time)),issuedAtTime:Gt(dr(o.iat)),expirationTime:Gt(dr(o.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function dr(r){return Number(r)*1e3}function Fr(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return vn("JWT malformed, contained fewer than 3 sections"),null;try{const o=Us(n);return o?JSON.parse(o):(vn("Failed to decode base64 JWT payload"),null)}catch(o){return vn("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ys(r){const e=Fr(r);return k(e,"internal-error"),k(typeof e.exp<"u","internal-error"),k(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yt(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ke&&Wh(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function Wh({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class zh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Sr{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gt(this.lastLoginAt),this.creationTime=Gt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Rn(r){const e=r.auth,n=await r.getIdToken(),i=await Yt(r,Cn(e,{idToken:n}));k(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?ao(o.providerUserInfo):[],u=qh(r.providerData,c),I=r.isAnonymous,E=!(r.email&&o.passwordHash)&&!u?.length,T=I?E:!1,R={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Sr(o.createdAt,o.lastLoginAt),isAnonymous:T};Object.assign(r,R)}async function Gh(r){const e=ct(r);await Rn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qh(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function ao(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Jh(r,e){const n=await so(r,{},async()=>{const i=Qt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,u=await oo(r,o,"/v1/token",`key=${c}`),I=await r._getAdditionalHeaders();I["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:I,body:i};return r.emulatorConfig&&Xt(r.emulatorConfig.host)&&(E.credentials="include"),io.fetch()(u,E)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Kh(r,e){return St(r,"POST","/v2/accounts:revokeToken",jr(r,e))}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(typeof e.idToken<"u","internal-error"),k(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ys(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){k(e.length!==0,"internal-error");const n=ys(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(k(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:c}=await Jh(e,n);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:c}=n,u=new _t;return i&&(k(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(k(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(k(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return Ae("not implemented")}}function je(r,e){k(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class pe{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new zh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sr(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Yt(this,this.stsTokenManager.getToken(this.auth,e));return k(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $h(this,e)}reload(){return Gh(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pe({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Rn(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ve(this.auth.app))return Promise.reject(rt(this.auth));const e=await this.getIdToken();return await Yt(this,Hh(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,I=n.tenantId??void 0,E=n._redirectEventId??void 0,T=n.createdAt??void 0,R=n.lastLoginAt??void 0,{uid:C,emailVerified:b,isAnonymous:W,providerData:B,stsTokenManager:G}=n;k(C&&G,e,"internal-error");const H=_t.fromJSON(this.name,G);k(typeof C=="string",e,"internal-error"),je(i,e.name),je(o,e.name),k(typeof b=="boolean",e,"internal-error"),k(typeof W=="boolean",e,"internal-error"),je(c,e.name),je(u,e.name),je(I,e.name),je(E,e.name),je(T,e.name),je(R,e.name);const J=new pe({uid:C,auth:e,email:o,emailVerified:b,displayName:i,isAnonymous:W,photoURL:u,phoneNumber:c,tenantId:I,stsTokenManager:H,createdAt:T,lastLoginAt:R});return B&&Array.isArray(B)&&(J.providerData=B.map(ee=>({...ee}))),E&&(J._redirectEventId=E),J}static async _fromIdTokenResponse(e,n,i=!1){const o=new _t;o.updateFromServerResponse(n);const c=new pe({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Rn(c),c}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];k(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?ao(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!c?.length,I=new _t;I.updateFromIdToken(i);const E=new pe({uid:o.localId,auth:e,stsTokenManager:I,isAnonymous:u}),T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Sr(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(E,T),E}}const vs=new Map;function be(r){Pe(r instanceof Function,"Expected a class definition");let e=vs.get(r);return e?(Pe(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,vs.set(r,e),e)}class co{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}co.type="NONE";const ws=co;function wn(r,e,n){return`firebase:${r}:${e}:${n}`}class yt{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=wn(this.userKey,o.apiKey,c),this.fullPersistenceKey=wn("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cn(this.auth,{idToken:e}).catch(()=>{});return n?pe._fromGetAccountInfoResponse(this.auth,n,e):null}return pe._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new yt(be(ws),e,i);const o=(await Promise.all(n.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let c=o[0]||be(ws);const u=wn(i,e.config.apiKey,e.name);let I=null;for(const T of n)try{const R=await T._get(u);if(R){let C;if(typeof R=="string"){const b=await Cn(e,{idToken:R}).catch(()=>{});if(!b)break;C=await pe._fromGetAccountInfoResponse(e,b,R)}else C=pe._fromJSON(e,R);T!==c&&(I=C),c=T;break}}catch{}const E=o.filter(T=>T._shouldAllowMigration);return!c._shouldAllowMigration||!E.length?new yt(c,e,i):(c=E[0],I&&await c._set(u,I.toJSON()),await Promise.all(n.map(async T=>{if(T!==c)try{await T._remove(u)}catch{}})),new yt(c,e,i))}}function Is(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fo(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ho(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(go(e))return"Blackberry";if(mo(e))return"Webos";if(uo(e))return"Safari";if((e.includes("chrome/")||lo(e))&&!e.includes("edge/"))return"Chrome";if(po(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if(i?.length===2)return i[1]}return"Other"}function ho(r=ae()){return/firefox\//i.test(r)}function uo(r=ae()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lo(r=ae()){return/crios\//i.test(r)}function fo(r=ae()){return/iemobile/i.test(r)}function po(r=ae()){return/android/i.test(r)}function go(r=ae()){return/blackberry/i.test(r)}function mo(r=ae()){return/webos/i.test(r)}function Vr(r=ae()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Yh(r=ae()){return Vr(r)&&!!window.navigator?.standalone}function Xh(){return ka()&&document.documentMode===10}function _o(r=ae()){return Vr(r)||po(r)||mo(r)||go(r)||/windows phone/i.test(r)||fo(r)}function yo(r,e=[]){let n;switch(r){case"Browser":n=Is(ae());break;case"Worker":n=`${Is(ae())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tt}/${i}`}class Zh{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((u,I)=>{try{const E=e(c);u(E)}catch(E){I(E)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Qh(r,e={}){return St(r,"GET","/v2/passwordPolicy",jr(r,e))}const eu=6;class tu{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??eu,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class nu{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Es(this),this.idTokenSubscription=new Es(this),this.beforeStateQueue=new Zh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=no,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=be(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yt.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cn(this,{idToken:e}),i=await pe._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ve(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=i?._redirectEventId,I=await this.tryRedirectSignIn(e);(!c||c===u)&&I?.user&&(i=I.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return k(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rn(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uh()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ve(this.app))return Promise.reject(rt(this));const n=e?ct(e):null;return n&&k(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&k(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ve(this.app)?Promise.reject(rt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ve(this.app)?Promise.reject(rt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(be(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qh(this),n=new tu(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zt("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Kh(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&be(e)||this._popupRedirectResolver;k(n,this,"argument-error"),this.redirectPersistenceManager=await yt.create(this,[be(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const I=this._isInitialized?Promise.resolve():this._initializationPromise;if(k(I,this,"internal-error"),I.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const E=e.addObserver(n,i,o);return()=>{u=!0,E()}}else{const E=e.addObserver(n);return()=>{u=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ve(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Dh(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Br(r){return ct(r)}class Es{constructor(e){this.auth=e,this.observer=null,this.addObserver=xa(n=>this.observer=n)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ru(r){Hr=r}function iu(r){return Hr.loadJS(r)}function su(){return Hr.gapiScript}function ou(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function au(r,e){const n=Pr(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(it(c,e??{}))return o;Re(o,"already-initialized")}return n.initialize({options:e})}function cu(r,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(be);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function hu(r,e,n){const i=Br(r);k(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=vo(e),{host:u,port:I}=uu(e),E=I===null?"":`:${I}`,T={url:`${c}//${u}${E}/`},R=Object.freeze({host:u,port:I,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){k(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),k(it(T,i.config.emulator)&&it(R,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=T,i.emulatorConfig=R,i.settings.appVerificationDisabledForTesting=!0,Xt(u)?(Vs(`${c}//${u}${E}`),Bs("Auth",!0)):lu()}function vo(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function uu(r){const e=vo(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:Ts(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:Ts(u)}}}function Ts(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function lu(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class wo{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ae("not implemented")}_getIdTokenResponse(e){return Ae("not implemented")}_linkToIdToken(e,n){return Ae("not implemented")}_getReauthenticationResolver(e){return Ae("not implemented")}}async function vt(r,e){return Vh(r,"POST","/v1/accounts:signInWithIdp",jr(r,e))}const fu="http://localhost";class at extends wo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new at(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Re("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=n;if(!i||!o)return null;const u=new at(i,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return vt(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,vt(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vt(e,n)}buildRequest(){const e={requestUri:fu,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qt(n)}return e}}class Io{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rn extends Io{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fe extends rn{constructor(){super("facebook.com")}static credential(e){return at._fromParams({providerId:Fe.PROVIDER_ID,signInMethod:Fe.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fe.credentialFromTaggedObject(e)}static credentialFromError(e){return Fe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fe.credential(e.oauthAccessToken)}catch{return null}}}Fe.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fe.PROVIDER_ID="facebook.com";class Ve extends rn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return at._fromParams({providerId:Ve.PROVIDER_ID,signInMethod:Ve.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ve.credentialFromTaggedObject(e)}static credentialFromError(e){return Ve.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ve.credential(n,i)}catch{return null}}}Ve.GOOGLE_SIGN_IN_METHOD="google.com";Ve.PROVIDER_ID="google.com";class Be extends rn{constructor(){super("github.com")}static credential(e){return at._fromParams({providerId:Be.PROVIDER_ID,signInMethod:Be.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Be.credentialFromTaggedObject(e)}static credentialFromError(e){return Be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Be.credential(e.oauthAccessToken)}catch{return null}}}Be.GITHUB_SIGN_IN_METHOD="github.com";Be.PROVIDER_ID="github.com";class He extends rn{constructor(){super("twitter.com")}static credential(e,n){return at._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return He.credential(n,i)}catch{return null}}}He.TWITTER_SIGN_IN_METHOD="twitter.com";He.PROVIDER_ID="twitter.com";class Et{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const c=await pe._fromIdTokenResponse(e,i,o),u=Ss(i);return new Et({user:c,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Ss(i);return new Et({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Ss(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Pn extends ke{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Pn.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Pn(e,n,i,o)}}function Eo(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Pn._fromErrorAndOperation(r,c,e,i):c})}async function du(r,e,n=!1){const i=await Yt(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Et._forOperation(r,"link",i)}async function pu(r,e,n=!1){const{auth:i}=r;if(ve(i.app))return Promise.reject(rt(i));const o="reauthenticate";try{const c=await Yt(r,Eo(i,o,e,r),n);k(c.idToken,i,"internal-error");const u=Fr(c.idToken);k(u,i,"internal-error");const{sub:I}=u;return k(r.uid===I,i,"user-mismatch"),Et._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Re(i,"user-mismatch"),c}}async function gu(r,e,n=!1){if(ve(r.app))return Promise.reject(rt(r));const i="signIn",o=await Eo(r,i,e),c=await Et._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(c.user),c}function mu(r,e,n,i){return ct(r).onIdTokenChanged(e,n,i)}function _u(r,e,n){return ct(r).beforeAuthStateChanged(e,n)}const kn="__sak";class To{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kn,"1"),this.storage.removeItem(kn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const yu=1e3,vu=10;class So extends To{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_o(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,I,E)=>{this.notifyListeners(u,E)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);Xh()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,vu):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},yu)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}So.type="LOCAL";const wu=So;class Ao extends To{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ao.type="SESSION";const bo=Ao;function Iu(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class On{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new On(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:c}=n.data,u=this.handlersMap[o];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const I=Array.from(u).map(async T=>T(n.origin,c)),E=await Iu(I);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:E})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}On.receivers=[];function $r(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}class Eu{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((I,E)=>{const T=$r("",20);o.port1.start();const R=setTimeout(()=>{E(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(C){const b=C;if(b.data.eventId===T)switch(b.data.status){case"ack":clearTimeout(R),c=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),I(b.data.response);break;default:clearTimeout(R),clearTimeout(c),E(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:T,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Ee(){return window}function Tu(r){Ee().location.href=r}function Co(){return typeof Ee().WorkerGlobalScope<"u"&&typeof Ee().importScripts=="function"}async function Su(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Au(){return navigator?.serviceWorker?.controller||null}function bu(){return Co()?self:null}const Ro="firebaseLocalStorageDb",Cu=1,Nn="firebaseLocalStorage",Po="fbase_key";class sn{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dn(r,e){return r.transaction([Nn],e?"readwrite":"readonly").objectStore(Nn)}function Ru(){const r=indexedDB.deleteDatabase(Ro);return new sn(r).toPromise()}function Ar(){const r=indexedDB.open(Ro,Cu);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Nn,{keyPath:Po})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Nn)?e(i):(i.close(),await Ru(),e(await Ar()))})})}async function As(r,e,n){const i=Dn(r,!0).put({[Po]:e,value:n});return new sn(i).toPromise()}async function Pu(r,e){const n=Dn(r,!1).get(e),i=await new sn(n).toPromise();return i===void 0?null:i.value}function bs(r,e){const n=Dn(r,!0).delete(e);return new sn(n).toPromise()}const ku=800,Nu=3;class ko{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ar(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Nu)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Co()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=On._getInstance(bu()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Su(),!this.activeServiceWorker)return;this.sender=new Eu(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Au()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ar();return await As(e,kn,"1"),await bs(e,kn),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>As(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Pu(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bs(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Dn(o,!1).getAll();return new sn(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ku)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ko.type="LOCAL";const Ou=ko;new nn(3e4,6e4);function Du(r,e){return e?be(e):(k(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Wr extends wo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vt(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vt(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vt(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Lu(r){return gu(r.auth,new Wr(r),r.bypassAuthState)}function Mu(r){const{auth:e,user:n}=r;return k(n,e,"internal-error"),pu(n,new Wr(r),r.bypassAuthState)}async function Uu(r){const{auth:e,user:n}=r;return k(n,e,"internal-error"),du(n,new Wr(r),r.bypassAuthState)}class No{constructor(e,n,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:c,error:u,type:I}=e;if(u){this.reject(u);return}const E={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(I)(E))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lu;case"linkViaPopup":case"linkViaRedirect":return Uu;case"reauthViaPopup":case"reauthViaRedirect":return Mu;default:Re(this.auth,"internal-error")}}resolve(e){Pe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xu=new nn(2e3,1e4);class gt extends No{constructor(e,n,i,o,c){super(e,n,o,c),this.provider=i,this.authWindow=null,this.pollId=null,gt.currentPopupAction&&gt.currentPopupAction.cancel(),gt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return k(e,this.auth,"internal-error"),e}async onExecution(){Pe(this.filter.length===1,"Popup operations only handle one event");const e=$r();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ie(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gt.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xu.get())};e()}}gt.currentPopupAction=null;const ju="pendingRedirect",In=new Map;class Fu extends No{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=In.get(this.auth._key());if(!e){try{const i=await Vu(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}In.set(this.auth._key(),e)}return this.bypassAuthState||In.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vu(r,e){const n=$u(e),i=Hu(r);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function Bu(r,e){In.set(r._key(),e)}function Hu(r){return be(r._redirectPersistence)}function $u(r){return wn(ju,r.config.apiKey,r.name)}async function Wu(r,e,n=!1){if(ve(r.app))return Promise.reject(rt(r));const i=Br(r),o=Du(i,e),u=await new Fu(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const zu=600*1e3;class Gu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qu(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Oo(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ie(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zu&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cs(e))}saveEventToCache(e){this.cachedEventUids.add(Cs(e)),this.lastProcessedEventTime=Date.now()}}function Cs(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Oo({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function qu(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oo(r);default:return!1}}async function Ju(r,e={}){return St(r,"GET","/v1/projects",e)}const Ku=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yu=/^https?/;async function Xu(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Ju(r);for(const n of e)try{if(Zu(n))return}catch{}Re(r,"unauthorized-domain")}function Zu(r){const e=Tr(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!Yu.test(n))return!1;if(Ku.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const Qu=new nn(3e4,6e4);function Rs(){const r=Ee().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function el(r){return new Promise((e,n)=>{function i(){Rs(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rs(),n(Ie(r,"network-request-failed"))},timeout:Qu.get()})}if(Ee().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ee().gapi?.load)i();else{const o=ou("iframefcb");return Ee()[o]=()=>{gapi.load?i():n(Ie(r,"network-request-failed"))},iu(`${su()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw En=null,e})}let En=null;function tl(r){return En=En||el(r),En}const nl=new nn(5e3,15e3),rl="__/auth/iframe",il="emulator/auth/iframe",sl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function al(r){const e=r.config;k(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?xr(e,il):`https://${r.config.authDomain}/${rl}`,i={apiKey:e.apiKey,appName:r.name,v:Tt},o=ol.get(r.config.apiHost);o&&(i.eid=o);const c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${Qt(i).slice(1)}`}async function cl(r){const e=await tl(r),n=Ee().gapi;return k(n,r,"internal-error"),e.open({where:document.body,url:al(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sl,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const u=Ie(r,"network-request-failed"),I=Ee().setTimeout(()=>{c(u)},nl.get());function E(){Ee().clearTimeout(I),o(i)}i.ping(E).then(E,()=>{c(u)})}))}const hl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ul=500,ll=600,fl="_blank",dl="http://localhost";class Ps{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pl(r,e,n,i=ul,o=ll){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let I="";const E={...hl,width:i.toString(),height:o.toString(),top:c,left:u},T=ae().toLowerCase();n&&(I=lo(T)?fl:n),ho(T)&&(e=e||dl,E.scrollbars="yes");const R=Object.entries(E).reduce((b,[W,B])=>`${b}${W}=${B},`,"");if(Yh(T)&&I!=="_self")return gl(e||"",I),new Ps(null);const C=window.open(e||"",I,R);k(C,r,"popup-blocked");try{C.focus()}catch{}return new Ps(C)}function gl(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const ml="__/auth/handler",_l="emulator/auth/handler",yl=encodeURIComponent("fac");async function ks(r,e,n,i,o,c){k(r.config.authDomain,r,"auth-domain-config-required"),k(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:Tt,eventId:o};if(e instanceof Io){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",Ua(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[R,C]of Object.entries({}))u[R]=C}if(e instanceof rn){const R=e.getScopes().filter(C=>C!=="");R.length>0&&(u.scopes=R.join(","))}r.tenantId&&(u.tid=r.tenantId);const I=u;for(const R of Object.keys(I))I[R]===void 0&&delete I[R];const E=await r._getAppCheckToken(),T=E?`#${yl}=${encodeURIComponent(E)}`:"";return`${vl(r)}?${Qt(I).slice(1)}${T}`}function vl({config:r}){return r.emulator?xr(r,_l):`https://${r.authDomain}/${ml}`}const pr="webStorageSupport";class wl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bo,this._completeRedirectFn=Wu,this._overrideRedirectResult=Bu}async _openPopup(e,n,i,o){Pe(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await ks(e,n,i,Tr(),o);return pl(e,c,$r())}async _openRedirect(e,n,i,o){await this._originValidation(e);const c=await ks(e,n,i,Tr(),o);return Tu(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Pe(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await cl(e),i=new Gu(e);return n.register("authEvent",o=>(k(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pr,{type:pr},o=>{const c=o?.[0]?.[pr];c!==void 0&&n(!!c),Re(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Xu(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _o()||uo()||Vr()}}const Il=wl;var Ns="@firebase/auth",Os="1.12.0";class El{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Tl(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sl(r){wt(new st("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:I}=i.options;k(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const E={apiKey:u,authDomain:I,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yo(r)},T=new nu(i,o,c,E);return cu(T,n),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),wt(new st("auth-internal",e=>{const n=Br(e.getProvider("auth").getImmediate());return(i=>new El(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ze(Ns,Os,Tl(r)),ze(Ns,Os,"esm2020")}const Al=300,bl=Fs("authIdTokenMaxAge")||Al;let Ds=null;const Cl=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>bl)return;const o=n?.token;Ds!==o&&(Ds=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Rl(r=kr()){const e=Pr(r,"auth");if(e.isInitialized())return e.getImmediate();const n=au(r,{popupRedirectResolver:Il,persistence:[Ou,wu,bo]}),i=Fs("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=Cl(c.toString());_u(n,u,()=>u(n.currentUser)),mu(n,I=>u(I))}}const o=xs("auth");return o&&hu(n,`http://${o}`),n}function Pl(){return document.getElementsByTagName("head")?.[0]??document}ru({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const c=Ie("internal-error");c.customData=o,n(c)},i.type="text/javascript",i.charset="UTF-8",Pl().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sl("Browser");const kl={apiKey:"AIzaSyDFHW-ZV5HPxGNJlwbi4Ravrs0tnyRW3Eg",authDomain:"gamesync-7fdde.firebaseapp.com",projectId:"gamesync-7fdde",storageBucket:"gamesync-7fdde.firebasestorage.app",messagingSenderId:"209595978385",appId:"1:209595978385:web:804bf3167a353073be2530"},Nl=()=>{if(typeof __firebase_config<"u"&&__firebase_config)try{return JSON.parse(__firebase_config)}catch(r){console.error("Failed to parse environment firebase config",r)}return kl},Tn=Nl(),Ol=!!(Tn&&Tn.apiKey&&Tn.apiKey.startsWith("AIza")),Dl=typeof __app_id<"u"?__app_id:"community-calendar-production";Dl.replace(/[^a-zA-Z0-9]/g,"_");let gr,Ll,Ml;if(Ol)try{gr=jc().length>0?kr():Ws(Tn),Ll=Rl(gr),Ml=Ch(gr)}catch(r){console.error("Firebase Initialization Error:",r)}
